const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./ApiDocs-Ccivnbbf.js","./clear-BJfJ8fXC.js","./i18n-IeFj-zpk.js","./index-VELz1aW8.js","./index-D0tiHk1o.css","./i18n-Eo_AnlvQ.css","./Button-BvWxWcmI.js","./Image-Bdf4wQSw.js","./Image-Da_XA0w6.css","./ImagePreview-C_QdZHnm.js","./utils.svelte-NGrRZh7a.js","./ScrollFade-YiJdnYV-.js","./MarkdownCode-DtcflbAZ.js","./prism-python-BAjd7o3F.js","./MarkdownCode-BRrdCvbR.css","./ScrollFade--X35ErLD.css","./ShareButton-CzqLPjdz.js","./FullscreenButton-Bk-YQzX_.js","./ImagePreview-CCVfwC4m.css","./Button-BZ4d-rtD.css","./StreamingBar-CdRfiLdf.js","./StreamingBar-K0YZHDYh.css","./init.svelte-BagFGebh.js","./index-tFQomdd2.js","./state.svelte-DFm6rEHb.js","./ApiDocs-YhV7c3aO.css","./ApiRecorder-BfGClmEy.js","./ApiRecorder-CoSLrx_1.css","./Settings-BmWef5YX.js","./Index-BkA-slKZ.js","./Example-BY9hq5K4.js","./Example-BeU1J4ps.css","./Index--Uz_kS2s.css","./Index-BrDKXHBm.js","./Index-B2BpVHOS.css","./Settings-CLQaonub.css","./Index-Bnsw1uEx.js","./Index-CGXESFFb.js","./Example-DYWwzfR4.js","./Example-BK-tWmkG.css","./Index-wZDUWKrz.css","./Index-Ce6HRlxt.js","./Example-CezEOcX5.js","./Example-CgIc4GLa.css","./Index-cY7HT1Ac.css","./Index-DP8ihX8q.css"])))=>i.map(i=>d[i]);
import{_ as $}from"./index-VELz1aW8.js";import"./svelte/svelte_internal_flags_async.js";import*as e from"./svelte/svelte_internal_client.js";import{setContext as Ue,untrack as qe,onMount as Ge}from"./svelte/svelte_svelte.js";import{h as ke,A as Ee,p as Ve}from"./i18n-IeFj-zpk.js";import{derived as Be,get as Ne,writable as Ze}from"./svelte/svelte_store.js";import{T as We}from"./StreamingBar-CdRfiLdf.js";import{I as He,t as Je,d as Ke}from"./utils.svelte-NGrRZh7a.js";import{A as Qe}from"./init.svelte-BagFGebh.js";import{L as Xe}from"./state.svelte-DFm6rEHb.js";function Ce(l,t){e.push(t,!0);var i,a=e.run([async()=>i=await e.async_derived(()=>t.node.component)]),s=e.comment(),o=e.first_child(s);e.async(o,[a[0]],[()=>t.node&&e.get(i)],(c,f)=>{var h=v=>{var j=e.comment(),d=e.first_child(j);e.async(d,[a[0]],[()=>t.node.props.shared_props.visible],(R,g)=>{var D=_=>{var x=e.comment(),k=e.first_child(x);e.async(k,[a[0]],void 0,O=>{e.component(k,()=>e.get(i).default,(b,m)=>{m(b,{get shared_props(){return t.node.props.shared_props},get props(){return t.node.props.props},children:(V,B)=>{var w=e.comment(),A=e.first_child(w);e.async(A,[a[0]],[()=>t.node.children&&t.node.children.length],(N,Z)=>{var ie=H=>{var J=e.comment(),ne=e.first_child(J);e.async(ne,[a[0]],[()=>t.node.children],(W,K)=>{e.each(W,17,()=>e.get(K),e.index,(T,re)=>{Ce(T,{get node(){return e.get(re)}})})}),e.append(H,J)};e.if(N,H=>{e.get(Z)&&H(ie)})}),e.append(V,w)},$$slots:{default:!0}})})}),e.append(_,x)};e.if(R,_=>{e.get(g)&&_(D)})}),e.append(v,j)};e.if(c,v=>{e.get(f)&&v(h)})}),e.append(l,s),e.pop()}function Ye(l){if(l==null)return"";const t=String(l),i=Ne(ke);if(t.includes(He))return Je(t,i);const a=i(t);return a!==t?a:t}const $e=Be(ke,()=>Ye),et="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='576'%20height='576'%20viewBox='0%200%20576%20576'%20fill='none'%3e%3cpath%20d='M287.5%20229L86%20344.5L287.5%20460L489%20344.5L287.5%20229Z'%20stroke='url(%23paint0_linear_102_7)'%20stroke-width='59'%20stroke-linejoin='round'/%3e%3cpath%20d='M287.5%20116L86%20231.5L287.5%20347L489%20231.5L287.5%20116Z'%20stroke='url(%23paint1_linear_102_7)'%20stroke-width='59'%20stroke-linejoin='round'/%3e%3cpath%20d='M86%20344L288%20229'%20stroke='url(%23paint2_linear_102_7)'%20stroke-width='59'%20stroke-linejoin='bevel'/%3e%3cdefs%3e%3clinearGradient%20id='paint0_linear_102_7'%20x1='60'%20y1='341'%20x2='429.5'%20y2='344'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23F9D100'/%3e%3cstop%20offset='1'%20stop-color='%23F97700'/%3e%3c/linearGradient%3e%3clinearGradient%20id='paint1_linear_102_7'%20x1='513.5'%20y1='231'%20x2='143.5'%20y2='231'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23F9D100'/%3e%3cstop%20offset='1'%20stop-color='%23F97700'/%3e%3c/linearGradient%3e%3clinearGradient%20id='paint2_linear_102_7'%20x1='60'%20y1='344'%20x2='428.987'%20y2='341.811'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23F9D100'/%3e%3cstop%20offset='1'%20stop-color='%23F97700'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e",tt="data:image/svg+xml,%3csvg%20width='28'%20height='28'%20viewBox='0%200%2028%2028'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M26.9425%202.94265C27.4632%202.42195%2027.4632%201.57773%2026.9425%201.05703C26.4218%200.536329%2025.5776%200.536329%2025.0569%201.05703L22.5713%203.54256C21.1213%202.59333%2019.5367%202.43378%2018.1753%202.64006C16.5495%202.88638%2015.1127%203.66838%2014.3905%204.39053L12.3905%206.39053C12.1405%206.64058%2012%206.97972%2012%207.33334C12%207.68697%2012.1405%208.0261%2012.3905%208.27615L19.7239%2015.6095C20.2446%2016.1302%2021.0888%2016.1302%2021.6095%2015.6095L23.6095%2013.6095C24.3316%2012.8873%2025.1136%2011.4505%2025.36%209.82475C25.5663%208.46312%2025.4066%206.87827%2024.4571%205.42807L26.9425%202.94265Z'%20fill='%233c4555'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M12.276%2012.9426C12.7967%2012.4219%2012.7967%2011.5777%2012.276%2011.057C11.7553%2010.5363%2010.9111%2010.5363%2010.3904%2011.057L8.66651%2012.7809L8.27615%2012.3905C8.0261%2012.1405%207.68697%2012%207.33334%2012C6.97972%2012%206.64058%2012.1405%206.39053%2012.3905L4.39053%2014.3905C3.66838%2015.1127%202.88638%2016.5495%202.64006%2018.1753C2.43377%2019.5367%202.59333%2021.1214%203.54262%2022.5714L1.05703%2025.057C0.536329%2025.5777%200.536329%2026.4219%201.05703%2026.9426C1.57773%2027.4633%202.42195%2027.4633%202.94265%2026.9426L5.42817%2024.4571C6.87835%2025.4066%208.46315%2025.5663%209.82475%2025.36C11.4505%2025.1136%2012.8873%2024.3316%2013.6095%2023.6095L15.6095%2021.6095C16.1302%2021.0888%2016.1302%2020.2446%2015.6095%2019.7239L15.2188%2019.3332L16.9426%2017.6093C17.4633%2017.0886%2017.4633%2016.2444%2016.9426%2015.7237C16.4219%2015.203%2015.5777%2015.203%2015.057%2015.7237L13.3332%2017.4475L10.5521%2014.6665L12.276%2012.9426Z'%20fill='%23FF7C00'/%3e%3c/svg%3e",it="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20xmlns='http://www.w3.org/2000/svg'%3e%3c!--%20Outer%20gear%20teeth%20(gray)%20--%3e%3cpath%20d='M19.14%2012.94c.04-.3.06-.61.06-.94%200-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24%200-.43.17-.47.41l-.36%202.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47%200-.59.22L2.74%208.87c-.12.21-.08.47.12.61l2.03%201.58c-.05.3-.07.62-.07.94s.02.64.07.94l-2.03%201.58c-.18.14-.23.41-.12.61l1.92%203.32c.12.22.37.29.59.22l2.39-.96c.5.38%201.03.7%201.62.94l.36%202.54c.05.24.24.41.48.41h3.84c.24%200%20.44-.17.47-.41l.36-2.54c.59-.24%201.13-.56%201.62-.94l2.39.96c.22.08.47%200%20.59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12%2015.6c-1.98%200-3.6-1.62-3.6-3.6s1.62-3.6%203.6-3.6%203.6%201.62%203.6%203.6-1.62%203.6-3.6%203.6z'%20fill='%23808080'/%3e%3c!--%20Inner%20circle%20(now%20gray)%20--%3e%3ccircle%20cx='12'%20cy='12'%20r='2.5'%20fill='%23808080'/%3e%3c/svg%3e",st="data:image/svg+xml,%3csvg%20viewBox='0%200%2020%2020'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20fill='%23000000'%3e%3cg%20id='SVGRepo_bgCarrier'%20stroke-width='0'%3e%3c/g%3e%3cg%20id='SVGRepo_tracerCarrier'%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3c/g%3e%3cg%20id='SVGRepo_iconCarrier'%3e%3ctitle%3erecord%20[%23982]%3c/title%3e%3cdesc%3eCreated%20with%20Sketch.%3c/desc%3e%3cdefs%3e%3c/defs%3e%3cg%20id='Page-1'%20stroke='none'%20stroke-width='1'%20fill='none'%20fill-rule='evenodd'%3e%3cg%20id='Dribbble-Light-Preview'%20transform='translate(-380.000000,%20-3839.000000)'%20fill='%23FF0000'%3e%3cg%20id='icons'%20transform='translate(56.000000,%20160.000000)'%3e%3cpath%20d='M338,3689%20C338,3691.209%20336.209,3693%20334,3693%20C331.791,3693%20330,3691.209%20330,3689%20C330,3686.791%20331.791,3685%20334,3685%20C336.209,3685%20338,3686.791%20338,3689%20M334,3697%20C329.589,3697%20326,3693.411%20326,3689%20C326,3684.589%20329.589,3681%20334,3681%20C338.411,3681%20342,3684.589%20342,3689%20C342,3693.411%20338.411,3697%20334,3697%20M334,3679%20C328.477,3679%20324,3683.477%20324,3689%20C324,3694.523%20328.477,3699%20334,3699%20C339.523,3699%20344,3694.523%20344,3689%20C344,3683.477%20339.523,3679%20334,3679'%20id='record-[%23982]'%3e%3c/path%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e";let te=!1,G=null,de=[],at=0,ee={},nt,le,rt=null,oe=[];async function ot(){if(!te)try{const l=document.title;document.title="[Sharing] Gradio Tab";const t=await navigator.mediaDevices.getDisplayMedia({video:{width:{ideal:1920},height:{ideal:1080},frameRate:{ideal:30}},audio:!0,selfBrowserSurface:"include"});document.title=l;const i={videoBitsPerSecond:5e6};G=new MediaRecorder(t,i),de=[],ee={},G.ondataavailable=dt,G.onstop=ct,G.start(1e3),te=!0,at=Date.now()}catch(l){le("Recording Error","Failed to start recording: "+l.message,"error")}}function lt(){!te||!G||(G.stop(),te=!1)}function dt(l){l.data.size>0&&de.push(l.data)}function ct(){te=!1;const l=new Blob(de,{type:"video/mp4"});_t(l),(G?.stream?.getTracks()||[]).forEach(i=>i.stop())}async function _t(l){try{le("Processing video","This may take a few seconds...","info");const t=new FormData;t.append("video",l,"recording.mp4"),ee.start!==void 0&&ee.end!==void 0&&(t.append("remove_segment_start",ee.start.toString()),t.append("remove_segment_end",ee.end.toString())),oe.length>0&&t.append("zoom_effects",JSON.stringify(oe));const i=await fetch(nt+"/gradio_api/process_recording",{method:"POST",body:t});if(!i.ok)throw new Error(`Server returned ${i.status}: ${i.statusText}`);const a=await i.blob(),s=`gradio-screen-recording-${new Date().toISOString().replace(/:/g,"-").replace(/\..+/,"")}.mp4`;ye(a,s),oe=[]}catch{le("Processing Error","Failed to process recording. Saving original version.","warning");const i=`gradio-screen-recording-${new Date().toISOString().replace(/:/g,"-").replace(/\..+/,"")}.mp4`;ye(l,i)}}function ye(l,t){const i=URL.createObjectURL(l),a=document.createElement("a");a.style.display="none",a.href=i,a.download=t,document.body.appendChild(a),a.click(),setTimeout(()=>{document.body.removeChild(a),URL.revokeObjectURL(i)},100)}const ut=/^'([^]+)'$/,xe=Symbol("NOVALUE");class ft{id;inputs;outputs;cancels;pending=!1;trigger_modes;event_args={};targets=[];connection_type;triggers=[];original_trigger_id=null;show_progress_on=null;component_prop_inputs=[];show_progress;functions;constructor(t){this.id=t.id,this.original_trigger_id=t.id,this.inputs=t.inputs,this.outputs=t.outputs,this.connection_type=t.connection,this.show_progress=t.show_progress,this.functions={frontend:t.js?mt(t.js,t.backend_fn,t.inputs.length,t.outputs.length):void 0,backend:t.backend_fn,backend_js:t.js_implementation?new Ee(`let result = await (${t.js_implementation})(...arguments);
						return (!Array.isArray(result)) ? [result] : result;`):void 0},this.targets=t.targets,this.cancels=t.cancels,this.trigger_modes=t.trigger_mode,this.show_progress_on=t.show_progress_on||null,this.component_prop_inputs=t.component_prop_inputs||[];for(let i=0;i<t.event_specific_args?.length;i++){const a=t.event_specific_args[i];this.event_args[a]=t[a]??null}}async run(t,i,a,s){let o=i;return this.functions.backend_js?{type:"data",data:await this.functions.backend_js(...o)}:(this.functions.frontend&&(o=await this.functions.frontend(i)),this.functions.backend?{type:"submit",data:t.submit(this.id,o,a,s,void 0,{"x-gradio-user":"app"})}:this.functions.frontend?{type:"data",data:o}:{type:"void",data:null})}add_trigger(t,i){this.triggers.push([t,i])}get_triggers(){return{success:this.triggers.filter(([,t])=>t==="success").map(([t])=>t),failure:this.triggers.filter(([,t])=>t==="failure").map(([t])=>t),all:this.triggers.filter(([,t])=>t==="all").map(([t])=>t)}}}class gt{dependencies_by_fn=new Map;dependencies_by_event=new Map;render_id_deps=new Map;submissions=new Map;client;queue=new Set;add_to_api_calls;update_state_cb;get_state_cb;rerender_cb;log_cb;loading_stati=new Xe;constructor(t,i,a,s,o,c,f){this.add_to_api_calls=f,this.log_cb=c,this.update_state_cb=a,this.get_state_cb=s,this.rerender_cb=o,this.client=i,this.reload(t,a,s,o,i)}reload(t,i,a,s,o){const{by_id:c,by_event:f}=this.create(t);this.dependencies_by_event=f,this.dependencies_by_fn=c,this.client=o,this.update_state_cb=i,this.get_state_cb=a,this.rerender_cb=s;for(const[h,v]of this.dependencies_by_fn)for(const[j]of v.targets)this.set_event_args(j,v.event_args);this.register_loading_stati(c)}register_loading_stati(t){for(const[i,a]of t)this.loading_stati.register(a.id,a.show_progress_on||a.outputs,a.inputs,a.show_progress)}clear_loading_status(t){this.loading_stati.clear(t)}async update_loading_stati_state(){for(const[t,i]of Object.entries(this.loading_stati.current))this.update_state_cb(Number(t),{loading_status:i},!1)}dispatch_state_change_events(t){if(t.changed_state_ids)for(const i of t.changed_state_ids)this.dependencies_by_event.get("change-"+i)?.forEach(s=>{this.dispatch({type:"fn",fn_index:s.id,target_id:i,event_data:null})})}async dispatch(t){let i;if(t.type==="fn"){const a=this.dependencies_by_fn.get(t.fn_index);a&&(i=[a])}else i=this.dependencies_by_event.get(`${t.event_name}-${t.target_id}`);for(let a=0;a<(i?.length||0);a++){const s=i?i[a]:void 0;if(s){this.cancel(s.cancels);const o=ht(s.trigger_modes,this.submissions.has(s.id));if(o==="skip")continue;if(o==="defer"){this.queue.add(s.id);continue}s.functions.backend&&(this.loading_stati.update({status:"pending",fn_index:s.id,stream_state:null}),this.update_loading_stati_state());const c=await this.gather_state(s.inputs,s.component_prop_inputs),f=await Promise.all(s.targets.map(([d])=>this.set_event_args(d,s.event_args))),{success:h,failure:v,all:j}=s.get_triggers();try{let d=null;if(t.target_id!==void 0||t.type==="event"?d=t.target_id||null:d=s.original_trigger_id,s.connection_type==="stream"&&this.submissions.has(s.id)){const g=this.submissions.get(s.id);let D={fn_index:s.id,data:c,event_data:t.event_data};g.send_chunk(D),f.forEach(_=>_());continue}this.add_to_api_calls({fn_index:s.id,data:c,event_data:t.event_data,trigger_id:d});const R=await s.run(this.client,c,t.event_data,d);if(R.type==="void")f.forEach(g=>g());else if(R.type==="data")await this.handle_data(s.outputs,R.data),f.forEach(g=>g());else{let g=null;s.connection_type==="stream"&&!this.submissions.has(s.id)&&(g="waiting"),this.submissions.set(s.id,R.data);let D=0;e:for await(const _ of R.data)if(D===0&&s.inputs.forEach(x=>{this.update_state_cb(x,{loading_status:{validation_error:null}},!1)}),D+=1,_!==null){if(_.type==="data"&&await this.handle_data(s.outputs,_.data),_.type==="status"){_.original_msg==="process_starts"&&s.connection_type==="stream"&&(g="open");const{fn_index:x,...k}=_;if(_.stage==="complete"){g="closed",h.forEach(O=>{this.dispatch({type:"fn",fn_index:O,event_data:null,target_id:d})}),this.dispatch_state_change_events(_),this.loading_stati.update({...k,status:k.stage,fn_index:s.id,stream_state:g}),this.update_loading_stati_state();break e}else if(_.stage==="generating")this.dispatch_state_change_events(_),this.loading_stati.update({...k,status:k.stage,fn_index:s.id,stream_state:g}),this.update_loading_stati_state();else if(_.stage==="error"){if(Array.isArray(_?.message)){_.message.forEach((b,m)=>{this.update_state_cb(s.inputs[m],{loading_status:{validation_error:b.is_valid?null:b.message,show_validation_error:!0}},!1)}),s.outputs.forEach(b=>{s.inputs.includes(b)||this.update_state_cb(b,{loading_status:{status:null}},!1)}),f.forEach(b=>b()),this.submissions.delete(s.id),this.queue.has(s.id)&&(this.queue.delete(s.id),this.dispatch(t));return}const O=_?.message?.replace(ut,(b,m)=>m);throw this.log_cb(_?._title??"Error",O||"",x,"error",k.duration,k.visible),new Error("Dependency function failed")}else this.loading_stati.update({...k,status:k.stage,fn_index:s.id,stream_state:g}),this.update_loading_stati_state()}if(_.type==="render"){this.loading_stati.update({status:"complete",fn_index:s.id,stream_state:null}),this.update_loading_stati_state();const{layout:x,components:k,render_id:O,dependencies:b}=_.data;this.rerender_cb(k,x);const{by_id:m,by_event:V}=this.create(b);this.register_loading_stati(m),m.forEach(w=>this.dependencies_by_fn.set(w.id,w)),V.forEach((w,A)=>this.dependencies_by_event.set(A,w));const B=this.render_id_deps.get(O);B&&B.forEach(w=>{m.has(w)||this.dependencies_by_fn.delete(w)}),this.render_id_deps.set(O,new Set(Array.from(m.keys()))),this.register_loading_stati(m);break e}_.type==="log"&&this.handle_log(_)}j.forEach(_=>{this.dispatch({type:"fn",fn_index:_,event_data:null,target_id:d})}),f.forEach(_=>_()),this.submissions.delete(s.id),this.queue.has(s.id)&&(this.queue.delete(s.id),this.dispatch(t))}}catch{this.loading_stati.update({status:"error",fn_index:s.id,eta:0,queue:!1,stream_state:null}),this.update_loading_stati_state(),this.submissions.delete(s.id),v.forEach(R=>{this.dispatch({type:"fn",fn_index:R,event_data:null})})}}}}create(t){const i=new Map,a=new Map,s=[];for(const o of t){const c=new ft(o);for(const[f,h]of o.targets)a.has(`${h}-${f}`)||a.set(`${h}-${f}`,[]),a.get(`${h}-${f}`)?.push(c);if(i.set(o.id,c),o.trigger_after!==void 0){const f=o.trigger_only_on_failure?"failure":o.trigger_only_on_success?"success":"all";s.push([o.id,o.trigger_after,f])}}for(const[o,c,f]of s){const h=i.get(c);h&&(h.add_trigger(o,f),h.original_trigger_id=vt(t,c))}return{by_id:i,by_event:a}}handle_log(t){const{title:i,log:a,fn_index:s,level:o,duration:c,visible:f}=t;this.log_cb(i,a,s,o,c,f)}async handle_data(t,i){await Promise.all(t.map(async(a,s)=>{const o=i[s]===void 0?xe:i[s];if(o!==xe)if(pt(o)){let c=!1,f=null;for(const[h,v]of Object.entries(o))if(h!=="__type__"){if(h==="visible"){c=!0,f=v;continue}await this.update_state_cb(t[s],{[h]:v},!1)}c&&await this.update_state_cb(t[s],{visible:f},!0)}else await this.update_state_cb(a,{value:o},!1)}))}async gather_state(t,i=[]){return(await Promise.all(t.map(a=>this.get_state_cb(a)))).map((a,s)=>i.includes(s)?a??null:a?.value??null)}async set_event_args(t,i){let a={};const s=await this.get_state_cb?.(t);if(!s)return()=>{};for(const[o]of Object.entries(i))a[o]=s?.[o]??null;return Object.keys(i).length===0?()=>{}:(await this.update_state_cb(t,i,!1),()=>{this.update_state_cb(t,a,!1)})}async cancel(t){if(t)for(const i of t){const a=this.submissions.get(i);if(a){await a.cancel(),this.loading_stati.update({status:"complete",fn_index:i,eta:0,queue:!1,stream_state:null}),this.update_loading_stati_state(),this.submissions.delete(i);const{failure:s,all:o}=this.dependencies_by_fn.get(i)?.get_triggers()||{failure:[],all:[]};s.forEach(c=>{this.dispatch({type:"fn",fn_index:c,event_data:null,target_id:i})}),o.forEach(c=>{this.dispatch({type:"fn",fn_index:c,event_data:null,target_id:i})})}}}dispatch_load_events(){this.dependencies_by_fn.forEach(t=>{t.targets.forEach(([i,a])=>{a==="load"&&this.dispatch({type:"fn",fn_index:t.id,event_data:null,target_id:i})})})}get_fns_from_targets(t){const i=[];return this.dependencies_by_event.forEach((a,s)=>{const[,o]=s.split("-");Number(o)===t&&a.forEach(c=>{i.push(c.id)})}),i}close_stream(t){const i=this.get_fns_from_targets(t);for(const a of i){const s=this.submissions.get(a);s&&(s.close_stream(),this.submissions.delete(a)),this.loading_stati.update({status:"complete",fn_index:a,eta:0,queue:!1,stream_state:"closed"})}this.update_loading_stati_state()}}function pt(l){return typeof l=="object"&&l!==null&&"__type__"in l&&l?.__type__==="update"}function ht(l,t){return t?l==="always_last"?"defer":l==="multiple"?"run":l==="once"?"skip":"run":"run"}function mt(l,t,i,a){const s=t?i===1:a===1;try{return new Ee("__fn_args",`  let result = await (${l})(...__fn_args);
  if (typeof result === "undefined") return [];
  return (${s} && !Array.isArray(result)) ? [result] : result;`)}catch(o){throw o}}function vt(l,t){let i=new Map,a=t,s=0;for(;s<100;){const o=i.get(a)||l.find(c=>c.id===a);if(!o||(i.set(o.id,o),o.trigger_after===null||o.trigger_after===void 0))break;a=o.trigger_after,s+=1}return a}var bt=e.from_html("<!> <!>",1),wt=e.from_html('<button class="show-api svelte-zxu34v"><!> <img class="svelte-zxu34v"/></button>'),yt=e.from_html('<div class="divider show-api-divider svelte-zxu34v">·</div> <a href="https://gradio.app" class="built-with svelte-zxu34v" target="_blank" rel="noreferrer"> <img class="svelte-zxu34v"/></a>',1),xt=e.from_html('<div>·</div> <button class="settings svelte-zxu34v"> <img class="svelte-zxu34v"/></button>',1),kt=e.from_html('<footer aria-label="Gradio footer navigation" class="svelte-zxu34v"><!> <!> <button> <img class="svelte-zxu34v"/></button> <div class="divider svelte-zxu34v">·</div> <!></footer>'),Et=e.from_html('<div id="api-recorder-container" class="svelte-zxu34v"><!></div>'),Ct=e.from_html('<div class="api-docs svelte-zxu34v" role="dialog" aria-modal="true"><div class="backdrop svelte-zxu34v"></div> <div class="api-docs-wrap svelte-zxu34v" role="document"><!></div></div>'),Lt=e.from_html('<div class="api-docs svelte-zxu34v" role="dialog" aria-modal="true"><div class="backdrop svelte-zxu34v"></div> <div class="api-docs-wrap svelte-zxu34v" role="document"><!></div></div>'),St=e.from_html('<div class="wrap svelte-zxu34v"><main class="contain svelte-zxu34v"><!></main> <!> <!> <!> <!> <!></div> <!>',1);function zt(l,t){e.push(t,!0);const i=()=>e.store_get($e,"$reactive_formatter",s),a=()=>e.store_get(Le,"$is_screen_recording",s),[s,o]=e.setup_stores();e.prop(t,"render_complete",3,!1);let c=e.prop(t,"ready",15,!1),f=e.prop(t,"reload_count",11,0),h=e.prop(t,"add_new_message",15);t.components.forEach(n=>{n.props.i18n||(n.props.i18n=i())});let v=e.state(e.proxy([]));function j(n,r,u){if(r==="share"){const{title:p,description:E}=u}else if(r==="error")T("Error",u,-1,r,10,!0);else if(r==="warning")T("Warning",u,-1,r,10,!0);else if(r==="info")T("Info",u,-1,r,10,!0);else if(r==="gradio_expand"||r==="gradio_tab_select"){const p=r==="gradio_expand"?n:u.component_id;d.render_previously_invisible_children(p)}else if(r=="clear_status")d.update_state(n,{loading_status:{}},!1),x.clear_loading_status(n);else if(r=="close_stream")x.close_stream(n);else if(r==="custom_button_click"){const p=u.id;R(p,"click",null)}else r==="select"&&n in d.initial_tabs&&(n=u.id),x.dispatch({type:"event",event_name:r,target_id:n,event_data:u})}let d=new Qe(t.components,t.layout,t.dependencies,{root:t.root,theme:t.theme_mode,version:t.version,api_prefix:t.api_prefix,max_file_size:t.max_file_size,autoscroll:t.autoscroll},t.app,i(),j);function R(n,r,u){x.dispatch({type:"event",event_name:r,target_id:n,event_data:u})}Ue(Ke,{register:d.register_component.bind(d),dispatcher:j});let g=e.state(e.proxy([])),D=e.state(null),_=n=>{e.set(D,n,!0),e.get(m)&&e.set(g,[...e.get(g),e.get(D)],!0)},x=new gt(t.dependencies,t.app,d.update_state.bind(d),d.get_state.bind(d),d.rerender.bind(d),T,_);e.user_effect(()=>{f(),qe(()=>{d.reload(t.components,t.layout,t.dependencies,{root:t.root,theme:t.theme_mode,version:t.version,api_prefix:t.api_prefix,max_file_size:t.max_file_size,autoscroll:t.autoscroll}),x.reload(t.dependencies,d.update_state.bind(d),d.get_state.bind(d),d.rerender.bind(d),t.app)})});let k=350,O=e.derived(()=>t.search_params.get("view")==="api"&&t.footer_links.includes("api")),b=e.derived(()=>t.search_params.get("view")==="settings"),m=e.derived(()=>t.search_params.get("view")==="api-recorder"&&t.footer_links.includes("api")),V=!0,B=!0,w=null,A=null,N=null,Z=e.state(null);async function ie(){if(!w||!A){const n=await $(()=>import("./ApiDocs-Ccivnbbf.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25]),import.meta.url),r=await $(()=>import("./ApiRecorder-BfGClmEy.js"),__vite__mapDeps([26,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,27]),import.meta.url);w||(w=n?.default),A||(A=r?.default)}}async function H(){A||(A=(await $(()=>import("./ApiRecorder-BfGClmEy.js"),__vite__mapDeps([26,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,27]),import.meta.url)).default)}async function J(){N||(N=(await $(()=>import("./Settings-BmWef5YX.js"),__vite__mapDeps([28,2,3,4,5,1,29,10,11,12,13,14,15,20,21,30,31,32,33,34,22,23,24,35]),import.meta.url)).default)}async function ne(){if(!e.get(Z)){const n=await $(()=>import("./Index-Bnsw1uEx.js"),__vite__mapDeps([36,3,4,37,2,5,10,20,11,12,13,14,15,21,38,39,40,41,42,43,44,45]),import.meta.url);e.set(Z,n.default,!0)}}async function W(n){e.set(m,!1),n&&await ie(),e.set(O,n);let r=new URLSearchParams(window.location.search);n?r.set("view","api"):r.delete("view"),history.replaceState(null,"","?"+r.toString())}async function K(n){n&&await J();let r=new URLSearchParams(window.location.search);n?r.set("view","settings"):r.delete("view"),history.replaceState(null,"","?"+r.toString()),e.set(b,!e.get(b))}function T(n,r,u,p,E=10,L=!1){L&&e.get(v).push({title:n,message:r,fn_index:u,type:p,id:++re,duration:E,visible:L})}h(T);let re=-1;i()("blocks.long_requests_queue"),i()("blocks.connection_can_break"),i()("blocks.waiting_for_inputs");let Le=Ze(!1),ce=0,Q;function _e(){if("parentIFrame"in window){const n=Q.children[0].getBoundingClientRect();if(!n)return;window.parentIFrame?.size(n.bottom+ce+32)}}function ue(){a()?lt():ot()}Ge(()=>{"parentIFrame"in window&&window.parentIFrame?.autoResize(!1);const n=new MutationObserver(_e),r=new ResizeObserver(_e);return n.observe(Q,{childList:!0,subtree:!0,attributes:!0}),r.observe(Q),d.ready.then(()=>{c(!0),x.dispatch_load_events()}),t.vibe_mode&&ne(),()=>{n.disconnect(),r.disconnect()}});function Se(n){e.set(v,e.get(v).filter(r=>r.id!==n),!0)}var fe=St();e.head("zxu34v",n=>{var r=bt(),u=e.first_child(r);{var p=y=>{e.deferred_template_effect(()=>{e.document.title=t.title??""})};e.if(u,y=>{t.control_page_title&&y(p)})}var E=e.sibling(u,2);{var L=y=>{var M=e.comment(),ae=e.first_child(M);e.html(ae,()=>`<style>${Ve(t.css,t.version)}</style>`),e.append(y,M)};e.if(E,y=>{t.css&&y(L)})}e.append(n,r)});var se=e.first_child(fe);let ge;var X=e.child(se);let pe;var ze=e.child(X);Ce(ze,{get node(){return d.root}}),e.reset(X),e.bind_this(X,n=>Q=n,()=>Q);var he=e.sibling(X,2);{var Re=n=>{var r=kt(),u=e.child(r);{var p=C=>{var S=wt(),P=e.child(S);{var I=z=>{var q=e.text();e.template_effect(Y=>e.set_text(q,Y),[()=>i()("errors.use_via_api_or_mcp")]),e.append(z,q)},F=z=>{var q=e.text();e.template_effect(Y=>e.set_text(q,Y),[()=>i()("errors.use_via_api")]),e.append(z,q)};e.if(P,z=>{t.app.config?.mcp_server?z(I):z(F,!1)})}var U=e.sibling(P,2);e.reset(S),e.template_effect(z=>{e.set_attribute(U,"src",tt),e.set_attribute(U,"alt",z)},[()=>i()("common.logo")]),e.event("click",S,()=>{W(!e.get(O))}),e.event("mouseenter",S,()=>{ie(),H()}),e.append(C,S)};e.if(u,C=>{t.footer_links.includes("api")&&C(p)})}var E=e.sibling(u,2);{var L=C=>{var S=yt(),P=e.sibling(e.first_child(S),2),I=e.child(P),F=e.sibling(I);e.reset(P),e.template_effect((U,z)=>{e.set_text(I,`${U??""} `),e.set_attribute(F,"src",et),e.set_attribute(F,"alt",z)},[()=>i()("common.built_with_gradio"),()=>i()("common.logo")]),e.append(C,S)};e.if(E,C=>{t.footer_links.includes("gradio")&&C(L)})}var y=e.sibling(E,2);let M;var ae=e.child(y),we=e.sibling(ae);e.reset(y);var Te=e.sibling(y,4);{var Ie=C=>{var S=xt(),P=e.first_child(S);let I;var F=e.sibling(P,2),U=e.child(F),z=e.sibling(U);e.reset(F),e.template_effect((q,Y)=>{I=e.set_class(P,1,"divider svelte-zxu34v",null,I,{hidden:!a()}),e.set_text(U,`${q??""} `),e.set_attribute(z,"src",it),e.set_attribute(z,"alt",Y)},[()=>i()("common.settings"),()=>i()("common.settings")]),e.event("click",F,()=>{K(!e.get(b))}),e.event("mouseenter",F,()=>{J()}),e.append(C,S)};e.if(Te,C=>{t.footer_links.includes("settings")&&C(Ie)})}e.reset(r),e.template_effect((C,S)=>{M=e.set_class(y,1,"record svelte-zxu34v",null,M,{hidden:!a()}),e.set_text(ae,`${C??""} `),e.set_attribute(we,"src",st),e.set_attribute(we,"alt",S)},[()=>i()("common.stop_recording"),()=>i()("common.stop_recording")]),e.event("click",y,()=>{ue()}),e.bind_element_size(r,"clientHeight",C=>ce=C),e.append(n,r)};e.if(he,n=>{t.footer_links.length>0&&n(Re)})}var me=e.sibling(he,2);{var Oe=n=>{var r=Et(),u=e.child(r);e.component(u,()=>A,(p,E)=>{E(p,{get api_calls(){return e.get(g)},get dependencies(){return t.dependencies}})}),e.reset(r),e.event("click",r,()=>{W(!0),e.set(m,!1)}),e.append(n,r)};e.if(me,n=>{e.get(m)&&A&&n(Oe)})}var ve=e.sibling(me,2);{var Ae=n=>{var r=Ct(),u=e.child(r),p=e.sibling(u,2),E=e.child(p);e.component(E,()=>w,(L,y)=>{y(L,{get root_node(){return d.root},get dependencies(){return t.dependencies},get root(){return t.root},get app(){return t.app},get space_id(){return t.space_id},get api_calls(){return e.get(g)},get username(){return t.username},get last_api_call(){return e.get(D)},$$events:{close:M=>{W(!1),e.set(g,[],!0),e.set(m,e.set(m,M.detail?.api_recorder_visible))}}})}),e.reset(p),e.reset(r),e.template_effect(L=>e.set_attribute(r,"aria-label",L),[()=>i()("errors.use_via_api")]),e.event("click",u,()=>{W(!1)}),e.append(n,r)};e.if(ve,n=>{e.get(O)&&d.root&&w&&n(Ae)})}var be=e.sibling(ve,2);{var Me=n=>{var r=Lt(),u=e.child(r),p=e.sibling(u,2),E=e.child(p);e.component(E,()=>N,(L,y)=>{y(L,{onclose:()=>{K(!1)},start_recording:()=>{ue()},get pwa_enabled(){return t.app.config.pwa},get root(){return t.root},get space_id(){return t.space_id},get i18n(){return i()},get allow_zoom(){return V},set allow_zoom(M){V=M},get allow_video_trim(){return B},set allow_video_trim(M){B=M}})}),e.reset(p),e.reset(r),e.template_effect(L=>e.set_attribute(r,"aria-label",L),[()=>i()("common.settings")]),e.event("click",u,()=>{K(!1)}),e.append(n,r)};e.if(be,n=>{e.get(b)&&t.app.config&&d.root&&N&&n(Me)})}var De=e.sibling(be,2);{var je=n=>{var r=e.comment(),u=e.first_child(r);e.component(u,()=>e.get(Z),(p,E)=>{E(p,{get app(){return t.app},get root(){return t.root}})}),e.append(n,r)};e.if(De,n=>{t.vibe_mode&&e.get(Z)&&n(je)})}e.reset(se);var Fe=e.sibling(se,2);{var Pe=n=>{We(n,{get messages(){return e.get(v)},on_close:Se})};e.if(Fe,n=>{e.get(v)&&n(Pe)})}e.template_effect(()=>{ge=e.set_style(se,"",ge,{"min-height":t.app_mode?"100%":"auto"}),pe=e.set_style(X,"",pe,{"flex-grow":t.app_mode?"1":"auto","margin-right":t.vibe_mode?`${k}px`:"0"})}),e.append(l,fe),e.pop(),o()}const It=Object.freeze(Object.defineProperty({__proto__:null,default:zt},Symbol.toStringTag,{value:"Module"}));export{It as B,tt as a,it as s};
