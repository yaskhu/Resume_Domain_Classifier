import"./svelte/svelte_internal_flags_async.js";import*as e from"./svelte/svelte_internal_client.js";import{U as O}from"./ModifyUpload-p1twvKjm.js";import{d as Q,r as R,S as X,B as K,U as Y}from"./ScrollFade-YiJdnYV-.js";import"./svelte/svelte_internal_flags_legacy.js";import{tick as Z}from"./svelte/svelte_svelte.js";import"./i18n-IeFj-zpk.js";import{Webcam as $}from"./Index-BBQHPdoo.js";import{p as ee}from"./Video-DZ7QGqqT.js";import{l as Ne,a as Oe}from"./Video-DZ7QGqqT.js";import{P as te,V as re}from"./VideoPreview-BC3OTTl4.js";import{default as Re}from"./Example-CCS9KjeB.js";import{G as ae}from"./utils.svelte-NGrRZh7a.js";import{S as M}from"./StreamingBar-CdRfiLdf.js";import"./index-VELz1aW8.js";import"./svelte/svelte_animate.js";import"./svelte/svelte_attachments.js";import"./svelte/svelte_easing.js";import"./svelte/svelte_internal_flags_tracing.js";import"./svelte/svelte_internal_server.js";import"./svelte/svelte_legacy.js";import"./svelte/svelte_motion.js";import"./svelte/svelte_reactivity.js";import"./svelte/svelte_reactivity_window.js";import"./svelte/svelte_server.js";import"./svelte/svelte_store.js";import"./svelte/svelte_transition.js";import"./svelte/svelte_events.js";import"./MarkdownCode-DtcflbAZ.js";import"./prism-python-BAjd7o3F.js";import"./ImagePreview-C_QdZHnm.js";import"./ShareButton-CzqLPjdz.js";import"./FullscreenButton-Bk-YQzX_.js";import"./Image-Bdf4wQSw.js";import"./Example-1lv5JGKJ.js";import"./VolumeLevels-CnHXisKY.js";var oe=e.from_html('<div class="upload-container svelte-ey25pz"><!></div>'),ne=e.from_html('<div class="file-name svelte-ey25pz"> </div> <div class="file-size svelte-ey25pz"> </div>',1),ie=e.from_html('<!> <div data-testid="video" class="video-container svelte-ey25pz"><!> <!></div>',1);function le(q,r){e.push(r,!0);let i=e.prop(r,"value",15,null),f=e.prop(r,"subtitle",3,null),A=e.prop(r,"sources",19,()=>["webcam","upload"]),t=e.prop(r,"label",3,void 0),U=e.prop(r,"show_download_button",3,!1),G=e.prop(r,"show_label",3,!0),k=e.prop(r,"active_source",3,"webcam"),x=e.prop(r,"handle_reset_value",3,()=>{}),z=e.prop(r,"max_file_size",3,null),E=e.prop(r,"uploading",15),L=e.prop(r,"upload_promise",15),T=e.prop(r,"playback_position",15);e.prop(r,"buttons",3,null),e.prop(r,"on_custom_button_click",3,null);let B=e.state(!1),m=e.derived(()=>k()??"webcam");function C(a){i(a),r.onchange?.(a),a&&r.onupload?.(a)}function W(){i(null),r.onchange?.(null),r.onclear?.()}function o(a){e.set(B,!0),r.onchange?.(a)}function c({detail:a}){r.onchange?.(a)}let u=e.state(!1);e.user_effect(()=>{r.ondrag?.(e.get(u))});var b=ie(),w=e.first_child(b);{let a=e.derived(()=>t()||"Video");Q(w,{get show_label(){return G()},get Icon(){return R},get label(){return e.get(a)}})}var j=e.sibling(w,2),_=e.child(j);{var h=a=>{var v=oe(),D=e.child(v);{var F=l=>{{let d=e.derived(()=>r.i18n("video.drop_to_upload"));O(l,{filetype:"video/x-m4v,video/*",onload:C,get max_file_size(){return z()},onerror:n=>r.onerror?.(n),get root(){return r.root},get upload(){return r.upload},get stream_handler(){return r.stream_handler},get aria_label(){return e.get(d)},get upload_promise(){return L()},set upload_promise(n){L(n)},get dragging(){return e.get(u)},set dragging(n){e.set(u,n,!0)},get uploading(){return E()},set uploading(n){E(n)},children:(n,y)=>{var s=e.comment(),g=e.first_child(s);{var p=S=>{var I=e.comment(),J=e.first_child(I);e.snippet(J,()=>r.children),e.append(S,I)};e.if(g,S=>{r.children&&S(p)})}e.append(n,s)},$$slots:{default:!0}})}},H=l=>{var d=e.comment(),n=e.first_child(d);{var y=s=>{$(s,{get root(){return r.root},get mirror_webcam(){return r.webcam_options.mirror},get webcam_constraints(){return r.webcam_options.constraints},get include_audio(){return r.include_audio},mode:"video",get i18n(){return r.i18n},get upload(){return r.upload},stream_every:1,$$events:{error:({detail:g})=>r.onerror?.(g),capture:c,start_recording:()=>r.onstart_recording?.(),stop_recording:()=>r.onstop_recording?.()}})};e.if(n,s=>{e.get(m)==="webcam"&&s(y)},!0)}e.append(l,d)};e.if(D,l=>{e.get(m)==="upload"?l(F):l(H,!1)})}e.reset(v),e.append(a,v)},P=a=>{var v=e.comment(),D=e.first_child(v);{var F=l=>{var d=e.comment(),n=e.first_child(d);e.key(n,()=>i()?.url,y=>{{let s=e.derived(()=>f()?.url),g=e.derived(()=>r.webcam_options.mirror&&e.get(m)==="webcam");te(y,{get upload(){return r.upload},get root(){return r.root},interactive:!0,get autoplay(){return r.autoplay},get src(){return i().url},get subtitle(){return e.get(s)},is_stream:!1,onplay:()=>r.onplay?.(),onpause:()=>r.onpause?.(),onstop:()=>r.onstop?.(),onend:()=>r.onend?.(),onerror:p=>r.onerror?.(p),get mirror(){return e.get(g)},get label(){return t()},handle_change:o,get handle_reset_value(){return x()},get loop(){return r.loop},get value(){return i()},get i18n(){return r.i18n},get show_download_button(){return U()},handle_clear:W,get has_change_history(){return e.get(B)},get playback_position(){return T()},set playback_position(p){T(p)}})}}),e.append(l,d)},H=l=>{var d=e.comment(),n=e.first_child(d);{var y=s=>{var g=ne(),p=e.first_child(g),S=e.child(p,!0);e.reset(p);var I=e.sibling(p,2),J=e.child(I,!0);e.reset(I),e.template_effect(N=>{e.set_text(S,i().orig_name||i().url),e.set_text(J,N)},[()=>ee(i().size)]),e.append(s,g)};e.if(n,s=>{i().size&&s(y)},!0)}e.append(l,d)};e.if(D,l=>{i()?.url?l(F):l(H,!1)},!0)}e.append(a,v)};e.if(_,a=>{i()===null||i()?.url===void 0?a(h):a(P,!1)})}var V=e.sibling(_,2);X(V,{get sources(){return A()},handle_clear:W,get active_source(){return e.get(m)},set active_source(a){e.set(m,a)}}),e.reset(j),e.append(q,b),e.pop()}var se=e.from_html("<!> <!>",1),de=e.from_html("<!> <!>",1);function Je(q,r){e.push(r,!0);const i=e.rest_props(r,["$$slots","$$events","$$legacy"]);let f=e.state(void 0);class A extends ae{async get_data(){return e.get(f)&&(await e.get(f),await Z()),await super.get_data()}}const t=new A(i);let U=e.state(e.proxy(t.props.value)),G=e.state(!1),k=e.state(!1),x=e.derived(()=>t.props.sources?t.props.sources[0]:void 0),z=t.props.value;e.user_effect(()=>{e.get(U)!=t.props.value&&(e.set(U,t.props.value,!0),t.dispatch("change"))});const E=()=>{z===null||t.props.value===z||(t.props.value=z)};function L(o){o!=null?t.props.value=o:t.props.value=null}function T(o){const[c,u]=o.includes("Invalid file type")?["warning","complete"]:["error","error"];t.shared.loading_status.status=u,t.shared.loading_status.message=o,t.dispatch(c,o)}var B=e.comment(),m=e.first_child(B);{var C=o=>{{let c=e.derived(()=>t.props.value===null&&e.get(x)==="upload"?"dashed":"solid"),u=e.derived(()=>e.get(k)?"focus":"base"),b=e.derived(()=>t.props.height||void 0);K(o,{get visible(){return t.shared.visible},get variant(){return e.get(c)},get border_mode(){return e.get(u)},padding:!1,get elem_id(){return t.shared.elem_id},get elem_classes(){return t.shared.elem_classes},get height(){return e.get(b)},get width(){return t.props.width},get container(){return t.shared.container},get scale(){return t.shared.scale},get min_width(){return t.shared.min_width},allow_overflow:!1,children:(w,j)=>{var _=se(),h=e.first_child(_);M(h,e.spread_props({get autoscroll(){return t.shared.autoscroll},get i18n(){return t.i18n}},()=>t.shared.loading_status,{on_clear_status:()=>t.dispatch("clear_status",t.shared.loading_status)}));var P=e.sibling(h,2);{let V=e.derived(()=>t.props.buttons??["download","share"]);re(P,{get value(){return t.props.value},get subtitle(){return t.props.subtitles},get label(){return t.shared.label},get show_label(){return t.shared.show_label},get autoplay(){return t.props.autoplay},get loop(){return t.props.loop},get buttons(){return e.get(V)},on_custom_button_click:a=>{t.dispatch("custom_button_click",{id:a})},onplay:()=>t.dispatch("play"),onpause:()=>t.dispatch("pause"),onstop:()=>t.dispatch("stop"),onend:()=>t.dispatch("end"),onshare:a=>t.dispatch("share",a),onerror:a=>t.dispatch("error",a),get i18n(){return t.i18n},upload:(...a)=>t.shared.client.upload(...a),get playback_position(){return t.props.playback_position},set playback_position(a){t.props.playback_position=a}})}e.append(w,_)},$$slots:{default:!0}})}},W=o=>{{let c=e.derived(()=>t.props.value===null&&e.get(x)==="upload"?"dashed":"solid"),u=e.derived(()=>e.get(k)?"focus":"base"),b=e.derived(()=>t.props.height||void 0);K(o,{get visible(){return t.shared.visible},get variant(){return e.get(c)},get border_mode(){return e.get(u)},padding:!1,get elem_id(){return t.shared.elem_id},get elem_classes(){return t.shared.elem_classes},get height(){return e.get(b)},get width(){return t.props.width},get container(){return t.shared.container},get scale(){return t.shared.scale},get min_width(){return t.shared.min_width},allow_overflow:!1,children:(w,j)=>{var _=de(),h=e.first_child(_);M(h,e.spread_props({get autoscroll(){return t.shared.autoscroll},get i18n(){return t.i18n}},()=>t.shared.loading_status,{on_clear_status:()=>t.dispatch("clear_status",t.shared.loading_status)}));var P=e.sibling(h,2);{let V=e.derived(()=>t.props.buttons??["download","share"]);le(P,{get value(){return t.props.value},get subtitle(){return t.props.subtitles},onchange:L,ondrag:a=>e.set(k,a,!0),onerror:T,get label(){return t.shared.label},get show_label(){return t.shared.show_label},get buttons(){return e.get(V)},on_custom_button_click:a=>{t.dispatch("custom_button_click",{id:a})},get sources(){return t.props.sources},get active_source(){return e.get(x)},get webcam_options(){return t.props.webcam_options},get include_audio(){return t.props.include_audio},get autoplay(){return t.props.autoplay},get root(){return t.shared.root},get loop(){return t.props.loop},handle_reset_value:E,onclear:()=>{t.props.value=null,t.dispatch("clear"),t.dispatch("input")},onplay:()=>t.dispatch("play"),onpause:()=>t.dispatch("pause"),onupload:()=>{t.dispatch("upload"),t.dispatch("input")},onstop:()=>t.dispatch("stop"),onend:()=>t.dispatch("end"),onstart_recording:()=>t.dispatch("start_recording"),onstop_recording:()=>t.dispatch("stop_recording"),get i18n(){return t.i18n},get max_file_size(){return t.shared.max_file_size},upload:(...a)=>t.shared.client.upload(...a),stream_handler:(...a)=>t.shared.client.stream(...a),get upload_promise(){return e.get(f)},set upload_promise(a){e.set(f,a,!0)},get uploading(){return e.get(G)},set uploading(a){e.set(G,a,!0)},get playback_position(){return t.props.playback_position},set playback_position(a){t.props.playback_position=a},children:(a,v)=>{Y(a,{get i18n(){return t.i18n},type:"video"})},$$slots:{default:!0}})}e.append(w,_)},$$slots:{default:!0}})}};e.if(m,o=>{t.shared.interactive?o(W,!1):o(C)})}e.append(q,B),e.pop()}export{Re as BaseExample,le as BaseInteractiveVideo,te as BasePlayer,re as BaseStaticVideo,Je as default,Ne as loaded,Oe as playable,ee as prettyBytes};
