import"./svelte/svelte_internal_flags_async.js";import*as e from"./svelte/svelte_internal_client.js";import{createEventDispatcher as be,onMount as De,onDestroy as Pe,tick as ce}from"./svelte/svelte_svelte.js";import"./i18n-IeFj-zpk.js";import{G as ze}from"./utils.svelte-NGrRZh7a.js";import{g as Be,I as Ee}from"./ImagePreview-C_QdZHnm.js";import"./svelte/svelte_internal_flags_legacy.js";import{W as Se,O as Ue,N as Me,Q as We,m as qe,X as Re,d as Te,f as Ie,e as Fe,I as Ce,p as Le,S as je,B as we,U as ye,E as Ae}from"./ScrollFade-YiJdnYV-.js";import{F as Oe}from"./FullscreenButton-Bk-YQzX_.js";import{a as Ge,S as ke}from"./StreamingBar-CdRfiLdf.js";import{p as He,F as Ne}from"./index-VELz1aW8.js";import{fade as Qe}from"./svelte/svelte_transition.js";import{U as Ve,a as Xe}from"./ModifyUpload-p1twvKjm.js";import{I as Je}from"./Image-Bdf4wQSw.js";import{default as Kt}from"./Example-1lv5JGKJ.js";import"./svelte/svelte_store.js";import"./ShareButton-CzqLPjdz.js";import"./MarkdownCode-DtcflbAZ.js";import"./prism-python-BAjd7o3F.js";import"./svelte/svelte_motion.js";import"./svelte/svelte_animate.js";import"./svelte/svelte_attachments.js";import"./svelte/svelte_easing.js";import"./svelte/svelte_internal_flags_tracing.js";import"./svelte/svelte_internal_server.js";import"./svelte/svelte_legacy.js";import"./svelte/svelte_reactivity.js";import"./svelte/svelte_reactivity_window.js";import"./svelte/svelte_server.js";import"./svelte/svelte_events.js";var Ke=e.from_html('<button class="svelte-1dqolfz"><div class="wrap svelte-1dqolfz"><span class="icon-wrap svelte-1dqolfz"><!></span> </div></button>');function Ye(C,s){e.push(s,!1);const o=be();e.init();var l=Ke();e.set_style(l,"",{},{height:"100%"});var U=e.child(l),P=e.child(U),t=e.child(P);Se(t),e.reset(P);var n=e.sibling(P);n.nodeValue=" Click to Access Webcam",e.reset(U),e.reset(l),e.event("click",l,()=>o("click")),e.append(C,l),e.pop()}function Ze(){return navigator.mediaDevices.enumerateDevices()}function $e(C,s){s.srcObject=C,s.muted=!0,s.play()}async function xe(C,s,o,l){const U={video:l?{deviceId:{exact:l},...o?.video}:o?.video||{width:{ideal:1920},height:{ideal:1440}},audio:C&&(o?.audio??!0)};return navigator.mediaDevices.getUserMedia(U).then(P=>($e(P,s),P))}function et(C){return C.filter(o=>o.kind==="videoinput")}var tt=e.from_html('<div title="grant webcam access" style="height: 100%"><!></div>'),rt=e.from_html('<div class="icon-with-text svelte-1tktvmr" style="width:var(--size-24);"><div class="icon color-primary svelte-1tktvmr" title="spinner"><!></div> </div>'),at=e.from_html('<div class="icon-with-text svelte-1tktvmr"><div class="icon color-primary svelte-1tktvmr" title="stop recording"><!></div> </div>'),st=e.from_html('<div class="icon-with-text svelte-1tktvmr"><div class="icon color-primary svelte-1tktvmr" title="start recording"><!></div> </div>'),lt=e.from_html('<div class="icon svelte-1tktvmr" title="capture photo"><!></div>'),it=e.from_html('<button class="icon svelte-1tktvmr" aria-label="select input source"><!></button>'),nt=e.from_html('<option class="svelte-1tktvmr"> </option>'),ot=e.from_html('<option class="svelte-1tktvmr"> </option>'),dt=e.from_html('<select class="select-wrap svelte-1tktvmr" aria-label="select source"><!></select>'),ut=e.from_html('<div class="button-wrap svelte-1tktvmr"><button class="svelte-1tktvmr"><!></button> <!></div> <!>',1),ct=e.from_html('<div class="wrap svelte-1tktvmr"><!>  <video></video> <img/> <!></div>',2);function _t(C,s){e.push(s,!1);let o=e.mutable_source(),l=e.mutable_source([]),U=e.mutable_source(null),P=e.prop(s,"stream_state",12,"closed"),t,n=e.prop(s,"streaming",12,!1),z=e.prop(s,"pending",12,!1),M=e.prop(s,"root",12,""),A=e.prop(s,"stream_every",12,1),B=e.prop(s,"mode",12,"image"),O=e.prop(s,"mirror_webcam",12),N=e.prop(s,"include_audio",12),Q=e.prop(s,"webcam_constraints",12,null),y=e.prop(s,"i18n",12),K=e.prop(s,"upload",12),G=e.prop(s,"value",12,null),Y=e.prop(s,"time_limit",12,null);const _=be();De(()=>{t=document.createElement("canvas"),n()&&B()==="image"&&window.setInterval(()=>{e.get(o)&&!z()&&F()},A()*1e3)});const p=async a=>{const b=a.target.value;await xe(N(),e.get(o),Q(),b).then(async R=>{W=R,e.set(U,e.get(l).find(se=>se.deviceId===b)||null),e.set(X,!1)})};async function Z(){try{xe(N(),e.get(o),Q()).then(async a=>{e.set(q,!0),e.set(l,await Ze()),W=a}).then(()=>et(e.get(l))).then(a=>{e.set(l,a);const d=W.getTracks().map(b=>b.getSettings()?.deviceId)[0];e.set(U,d&&a.find(b=>b.deviceId===d)||e.get(l)[0])}),(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)&&_("error",y()("image.no_webcam_support"))}catch(a){if(a instanceof DOMException&&a.name=="NotAllowedError")_("error",y()("image.allow_webcam_access"));else throw a}}function F(){if((!n()||n()&&e.get(v))&&e.get(o).videoWidth&&e.get(o).videoHeight){var a=t.getContext("2d");if(t.width=e.get(o).videoWidth,t.height=e.get(o).videoHeight,a.drawImage(e.get(o),0,0,e.get(o).videoWidth,e.get(o).videoHeight),O()&&(a.scale(-1,1),a.drawImage(e.get(o),-e.get(o).videoWidth,0)),n()&&(!e.get(v)||P()==="waiting"))return;if(n()){const d=t.toDataURL("image/jpeg");_("stream",d);return}t.toBlob(d=>{_(n()?"stream":"capture",d)},`image/${n()?"jpeg":"png"}`,.8)}}let v=e.mutable_source(!1),f=[],W,L,k;function de(){if(e.get(v)){k.stop();let a=new Blob(f,{type:L}),d=new FileReader;d.onload=async function(b){if(b.target){let R=new File([a],"sample."+L.substring(6));const se=await He([R]);let ue=(await K()(se,M()))?.filter(Boolean)[0];_("capture",ue),_("stop_recording")}},d.readAsDataURL(a)}else if(typeof MediaRecorder<"u"){_("start_recording"),f=[];let a=["video/webm","video/mp4"];for(let d of a)if(MediaRecorder.isTypeSupported(d)){L=d;break}if(L===null){console.error("No supported MediaRecorder mimeType");return}k=new MediaRecorder(W,{mimeType:L}),k.addEventListener("dataavailable",function(d){f.push(d.data)}),k.start(200)}e.set(v,!e.get(v))}let q=e.mutable_source(!1);function le({destroy:a}={}){B()==="image"&&n()&&e.set(v,!e.get(v)),a||(B()==="image"?F():de()),!e.get(v)&&W&&_("close_stream")}let X=e.mutable_source(!1);function j(a,d){const b=R=>{a&&!a.contains(R.target)&&!R.defaultPrevented&&d(R)};return document.addEventListener("click",b,!0),{destroy(){document.removeEventListener("click",b,!0)}}}function i(a){a.preventDefault(),a.stopPropagation(),e.set(X,!1)}Pe(()=>{typeof window>"u"||(le({destroy:!0}),W?.getTracks().forEach(a=>a.stop()))});var _e={click_outside:j,get stream_state(){return P()},set stream_state(a){P(a),e.flush()},get streaming(){return n()},set streaming(a){n(a),e.flush()},get pending(){return z()},set pending(a){z(a),e.flush()},get root(){return M()},set root(a){M(a),e.flush()},get stream_every(){return A()},set stream_every(a){A(a),e.flush()},get mode(){return B()},set mode(a){B(a),e.flush()},get mirror_webcam(){return O()},set mirror_webcam(a){O(a),e.flush()},get include_audio(){return N()},set include_audio(a){N(a),e.flush()},get webcam_constraints(){return Q()},set webcam_constraints(a){Q(a),e.flush()},get i18n(){return y()},set i18n(a){y(a),e.flush()},get upload(){return K()},set upload(a){K(a),e.flush()},get value(){return G()},set value(a){G(a),e.flush()},get time_limit(){return Y()},set time_limit(a){Y(a),e.flush()}};e.init();var $=ct(),te=e.child($);Ge(te,{get time_limit(){return Y()}});var re=e.sibling(te,2);let ie;e.bind_this(re,a=>e.set(o,a),()=>e.get(o));var H=e.sibling(re,2);let ee;var ne=e.sibling(H,2);{var ae=a=>{var d=tt(),b=e.child(d);Ye(b,{$$events:{click:async()=>Z()}}),e.reset(d),e.transition(1,d,()=>Qe,()=>({delay:100,duration:200})),e.append(a,d)},oe=a=>{var d=ut(),b=e.first_child(d),R=e.child(b),se=e.child(R);{var ue=u=>{var c=e.comment(),w=e.first_child(c);{var T=h=>{var m=rt(),I=e.child(m),x=e.child(I);We(x),e.reset(I);var D=e.sibling(I);e.reset(m),e.template_effect(S=>e.set_text(D,` ${S??""}`),[()=>(e.deep_read_state(y()),e.untrack(()=>y()("audio.waiting")))]),e.append(h,m)},g=h=>{var m=e.comment(),I=e.first_child(m);{var x=S=>{var V=at(),J=e.child(V),ve=e.child(J);qe(ve,{}),e.reset(J);var fe=e.sibling(J);e.reset(V),e.template_effect(he=>e.set_text(fe,` ${he??""}`),[()=>(e.deep_read_state(y()),e.untrack(()=>y()("audio.stop")))]),e.append(S,V)},D=S=>{var V=st(),J=e.child(V),ve=e.child(J);Re(ve),e.reset(J);var fe=e.sibling(J);e.reset(V),e.template_effect(he=>e.set_text(fe,` ${he??""}`),[()=>(e.deep_read_state(y()),e.untrack(()=>y()("audio.record")))]),e.append(S,V)};e.if(I,S=>{n()&&P()==="open"||!n()&&e.get(v)?S(x):S(D,!1)},!0)}e.append(h,m)};e.if(w,h=>{n()&&P()==="waiting"?h(T):h(g,!1)})}e.append(u,c)},ge=u=>{var c=lt(),w=e.child(c);Ue(w),e.reset(c),e.append(u,c)};e.if(se,u=>{B()==="video"||n()?u(ue):u(ge,!1)})}e.reset(R);var pe=e.sibling(R,2);{var me=u=>{var c=it(),w=e.child(c);Me(w),e.reset(c),e.event("click",c,()=>e.set(X,!0)),e.append(u,c)};e.if(pe,u=>{e.get(v)||u(me)})}e.reset(b);var r=e.sibling(b,2);{var E=u=>{var c=dt(),w=e.child(c);{var T=h=>{var m=nt(),I=e.child(m,!0);e.reset(m),m.value=m.__value="",e.template_effect(x=>e.set_text(I,x),[()=>(e.deep_read_state(y()),e.untrack(()=>y()("common.no_devices")))]),e.append(h,m)},g=h=>{var m=e.comment(),I=e.first_child(m);e.each(I,1,()=>e.get(l),e.index,(x,D)=>{var S=ot(),V=e.child(S,!0);e.reset(S);var J={};e.template_effect(()=>{e.set_selected(S,(e.get(U),e.get(D),e.untrack(()=>e.get(U).deviceId===e.get(D).deviceId))),e.set_text(V,(e.get(D),e.untrack(()=>e.get(D).label))),J!==(J=(e.get(D),e.untrack(()=>e.get(D).deviceId)))&&(S.value=(S.__value=(e.get(D),e.untrack(()=>e.get(D).deviceId)))??"")}),e.append(x,S)}),e.append(h,m)};e.if(w,h=>{e.get(l),e.untrack(()=>e.get(l).length===0)?h(T):h(g,!1)})}e.reset(c),e.action(c,(h,m)=>j?.(h,m),()=>i),e.effect(()=>e.event("change",c,p)),e.append(u,c)};e.if(r,u=>{e.get(X)&&e.get(U)&&u(E)})}e.template_effect(()=>e.set_attribute(R,"aria-label",B()==="image"?"capture photo":"start recording")),e.event("click",R,()=>le()),e.append(a,d)};e.if(ne,a=>{e.get(q)?a(oe,!1):a(ae)})}return e.reset($),e.template_effect(()=>{ie=e.set_class(re,1,"svelte-1tktvmr",null,ie,{flip:O(),hide:!e.get(q)||e.get(q)&&!!G()}),e.set_attribute(H,"src",(e.deep_read_state(G()),e.untrack(()=>G()?.url))),ee=e.set_class(H,1,"svelte-1tktvmr",null,ee,{hide:!e.get(q)||e.get(q)&&!G()})}),e.append(C,$),e.bind_prop(s,"click_outside",j),e.pop(_e)}var gt=e.from_html("<!> <!>",1),pt=e.from_html("<div><!></div>"),mt=e.from_html('<!> <div data-testid="image" class="image-container svelte-6uxbr3"><!> <div><!> <!></div> <!></div>',1);function vt(C,s){e.push(s,!1);const o=e.mutable_source();let l=e.prop(s,"value",12,null),U=e.prop(s,"label",12,void 0),P=e.prop(s,"show_label",12),t=e.prop(s,"sources",28,()=>["upload","clipboard","webcam"]),n=e.prop(s,"streaming",12,!1),z=e.prop(s,"pending",12,!1),M=e.prop(s,"webcam_options",12),A=e.prop(s,"selectable",12,!1),B=e.prop(s,"root",12),O=e.prop(s,"i18n",12),N=e.prop(s,"max_file_size",12,null),Q=e.prop(s,"upload",12),y=e.prop(s,"stream_handler",12),K=e.prop(s,"stream_every",12),G=e.prop(s,"time_limit",12),Y=e.prop(s,"show_fullscreen_button",12,!0),_=e.prop(s,"stream_state",12,"closed"),p=e.prop(s,"upload_promise",12,null),Z=e.prop(s,"onerror",12,void 0),F=e.mutable_source(),v=e.prop(s,"uploading",12,!1),f=e.prop(s,"active_source",12,null),W=e.prop(s,"fullscreen",12,!1),L=e.mutable_source([]),k=e.mutable_source();async function de(r){if(!n()){if(r.path?.toLowerCase().endsWith(".svg")&&r.url){const u=await(await fetch(r.url)).text();l({...r,url:`data:image/svg+xml,${encodeURIComponent(u)}`})}else l(r);await ce(),j("upload")}}function q(){l(null),j("clear"),j("change",null)}function le(r){q(),r.stopPropagation()}async function X(r,E){if(E==="stream"){j("stream",{value:{url:r},is_value_data:!0});return}e.set(k,Math.random().toString(36).substring(2,15));const u=new File([r],`image.${n()?"jpeg":"png"}`);e.set(L,[new Ne({path:u.name,orig_name:u.name,blob:u,size:u.size,mime_type:u.type,is_stream:!1})]),z(!0);const c=await e.get(F).load_files([u],e.get(k));(E==="change"||E==="upload")&&(l(c?.[0]||null),await ce(),j("change")),z(!1)}const j=be();let i=e.prop(s,"dragging",12,!1);function _e(r){let E=Be(r);E&&j("select",{index:E,value:null})}async function $(r){r==="clipboard"&&e.get(F).paste_clipboard()}let te=e.mutable_source();function re(r){r.preventDefault(),r.stopPropagation(),r.dataTransfer&&(r.dataTransfer.dropEffect="copy"),i(!0)}async function ie(r){r.preventDefault(),r.stopPropagation(),i(!1),l()&&(q(),await ce()),f("upload"),await ce(),e.get(F).load_files_from_drop(r)}e.legacy_pre_effect(()=>(e.deep_read_state(f()),e.deep_read_state(t())),()=>{!f()&&t()&&f(t()[0])}),e.legacy_pre_effect(()=>(e.deep_read_state(n()),e.deep_read_state(f())),()=>{e.set(o,n()&&f()==="webcam")}),e.legacy_pre_effect(()=>(e.deep_read_state(v()),e.get(o)),()=>{v()&&!e.get(o)&&l(null)}),e.legacy_pre_effect(()=>e.deep_read_state(i()),()=>{j("drag",i())}),e.legacy_pre_effect_reset();var H={get value(){return l()},set value(r){l(r),e.flush()},get label(){return U()},set label(r){U(r),e.flush()},get show_label(){return P()},set show_label(r){P(r),e.flush()},get sources(){return t()},set sources(r){t(r),e.flush()},get streaming(){return n()},set streaming(r){n(r),e.flush()},get pending(){return z()},set pending(r){z(r),e.flush()},get webcam_options(){return M()},set webcam_options(r){M(r),e.flush()},get selectable(){return A()},set selectable(r){A(r),e.flush()},get root(){return B()},set root(r){B(r),e.flush()},get i18n(){return O()},set i18n(r){O(r),e.flush()},get max_file_size(){return N()},set max_file_size(r){N(r),e.flush()},get upload(){return Q()},set upload(r){Q(r),e.flush()},get stream_handler(){return y()},set stream_handler(r){y(r),e.flush()},get stream_every(){return K()},set stream_every(r){K(r),e.flush()},get time_limit(){return G()},set time_limit(r){G(r),e.flush()},get show_fullscreen_button(){return Y()},set show_fullscreen_button(r){Y(r),e.flush()},get stream_state(){return _()},set stream_state(r){_(r),e.flush()},get upload_promise(){return p()},set upload_promise(r){p(r),e.flush()},get onerror(){return Z()},set onerror(r){Z(r),e.flush()},get uploading(){return v()},set uploading(r){v(r),e.flush()},get active_source(){return f()},set active_source(r){f(r),e.flush()},get fullscreen(){return W()},set fullscreen(r){W(r),e.flush()},get dragging(){return i()},set dragging(r){i(r),e.flush()}};e.init();var ee=mt(),ne=e.first_child(ee);{let r=e.derived_safe_equal(()=>U()||"Image");Te(ne,{get show_label(){return P()},get Icon(){return Ie},get label(){return e.get(r)}})}var ae=e.sibling(ne,2),oe=e.child(ae);Fe(oe,{children:(r,E)=>{var u=e.comment(),c=e.first_child(u);{var w=T=>{var g=gt(),h=e.first_child(g);{var m=x=>{Oe(x,{get fullscreen(){return W()},$$events:{fullscreen(D){e.bubble_event.call(this,s,D)}}})};e.if(h,x=>{Y()&&x(m)})}var I=e.sibling(h,2);Ce(I,{get Icon(){return Le},label:"Remove Image",onclick:le}),e.append(T,g)};e.if(c,T=>{e.deep_read_state(l()),e.get(o),e.untrack(()=>l()?.url&&!e.get(o))&&T(w)})}e.append(r,u)},$$slots:{default:!0}});var a=e.sibling(oe,2);let d,b;var R=e.child(a);{let r=e.derived_safe_equal(()=>l()!==null||f()==="webcam"),E=e.derived_safe_equal(()=>f()==="clipboard"?"clipboard":"image/*"),u=e.derived_safe_equal(()=>(e.deep_read_state(t()),e.deep_read_state(l()),e.untrack(()=>!t().includes("upload")||l()!==null))),c=e.derived_safe_equal(()=>(e.deep_read_state(O()),e.untrack(()=>O()("image.drop_to_upload"))));e.bind_this(Ve(R,{get hidden(){return e.get(r)},get filetype(){return e.get(E)},onload:de,get onerror(){return Z()},get root(){return B()},get max_file_size(){return N()},get disable_click(){return e.get(u)},get upload(){return Q()},get stream_handler(){return y()},get aria_label(){return e.get(c)},get upload_promise(){return p()},set upload_promise(w){p(w)},get uploading(){return v()},set uploading(w){v(w)},get dragging(){return i()},set dragging(w){i(w)},children:(w,T)=>{var g=e.comment(),h=e.first_child(g);{var m=I=>{var x=e.comment(),D=e.first_child(x);e.slot(D,s,"default",{},null),e.append(I,x)};e.if(h,I=>{l()===null&&I(m)})}e.append(w,g)},$$slots:{default:!0},$$legacy:!0}),w=>e.set(F,w),()=>e.get(F))}var se=e.sibling(R,2);{var ue=r=>{Xe(r,{get root(){return B()},get upload_id(){return e.get(k)},get stream_handler(){return y()},get files(){return e.get(L)}})},ge=r=>{var E=e.comment(),u=e.first_child(E);{var c=T=>{_t(T,{get root(){return B()},get value(){return l()},get stream_state(){return _()},get mirror_webcam(){return e.deep_read_state(M()),e.untrack(()=>M().mirror)},get stream_every(){return K()},get streaming(){return n()},mode:"image",include_audio:!1,get i18n(){return O()},get upload(){return Q()},get time_limit(){return G()},get webcam_constraints(){return e.deep_read_state(M()),e.untrack(()=>M().constraints)},$$events:{capture:g=>X(g.detail,"change"),stream:g=>X(g.detail,"stream"),error(g){e.bubble_event.call(this,s,g)},drag(g){e.bubble_event.call(this,s,g)},upload:g=>X(g.detail,"upload"),close_stream(g){e.bubble_event.call(this,s,g)}}})},w=T=>{var g=e.comment(),h=e.first_child(g);{var m=I=>{var x=pt();let D;var S=e.child(x);{let V=e.derived_safe_equal(()=>(e.deep_read_state(l()),e.untrack(()=>({alt:l().alt_text}))));Je(S,{get src(){return e.deep_read_state(l()),e.untrack(()=>l().url)},get restProps(){return e.get(V)}})}e.reset(x),e.template_effect(()=>D=e.set_class(x,1,"image-frame svelte-6uxbr3",null,D,{selectable:A()})),e.event("click",x,_e),e.append(I,x)};e.if(h,I=>{l()!==null&&!n()&&I(m)},!0)}e.append(T,g)};e.if(u,T=>{f()==="webcam"&&(n()||!n()&&!l())?T(c):T(w,!1)},!0)}e.append(r,E)};e.if(se,r=>{f()==="webcam"&&!n()&&z()?r(ue):r(ge,!1)})}e.reset(a);var pe=e.sibling(a,2);{var me=r=>{je(r,{get sources(){return t()},handle_clear:q,handle_select:$,get active_source(){return f()},set active_source(E){f(E)},$$legacy:!0})};e.if(pe,r=>{e.deep_read_state(t()),e.untrack(()=>t().length>1||t().includes("clipboard"))&&r(me)})}return e.reset(ae),e.bind_this(ae,r=>e.set(te,r),()=>e.get(te)),e.template_effect(()=>{d=e.set_class(a,1,"upload-container svelte-6uxbr3",null,d,{"reduced-height":t().length>1}),b=e.set_style(a,"",b,{width:l()?"auto":"100%"})}),e.event("dragover",a,re),e.event("drop",a,ie),e.append(C,ee),e.pop(H)}var ft=e.from_html("<!> <!>",1),ht=e.from_html("<!> <!>",1);function Vt(C,s){e.push(s,!0);let o={value:null},l=e.state(void 0);class U extends ze{async get_data(){e.get(l)&&(await e.get(l),await ce());const p=await super.get_data();return s.props.streaming&&(p.value=o.value),p}}const P=e.rest_props(s,["$$slots","$$events","$$legacy"]),t=new U(P);let n=e.state(!1),z=e.state(!1),M=e.derived(()=>t.props.sources?t.props.sources[0]:null),A;const B=_=>{const p=_;p.preventDefault(),p.stopPropagation(),p.type==="dragenter"||p.type==="dragover"?e.set(z,!0):p.type==="dragleave"&&e.set(z,!1)},O=_=>{if(t.shared.interactive){const p=_;p.preventDefault(),p.stopPropagation(),e.set(z,!1),A&&A.loadFilesFromDrop(p)}};let N=e.state(e.proxy(t.props.value));e.user_effect(()=>{e.get(N)!=t.props.value&&(e.set(N,t.props.value,!0),t.dispatch("change"))});let Q=e.derived(()=>t?.shared?.loading_status.stream_state);var y=e.comment(),K=e.first_child(y);{var G=_=>{{let p=e.derived(()=>e.get(z)?"focus":"base"),Z=e.derived(()=>t.props.height||void 0);we(_,{get visible(){return t.shared.visible},variant:"solid",get border_mode(){return e.get(p)},padding:!1,get elem_id(){return t.shared.elem_id},get elem_classes(){return t.shared.elem_classes},get height(){return e.get(Z)},get width(){return t.props.width},allow_overflow:!1,get container(){return t.shared.container},"scale{gradio.shared.scale}":!0,get min_width(){return t.shared.min_width},get fullscreen(){return e.get(n)},set fullscreen(F){e.set(n,F,!0)},children:(F,v)=>{var f=ft(),W=e.first_child(f);ke(W,e.spread_props({get autoscroll(){return t.shared.autoscroll},get i18n(){return t.i18n}},()=>t.shared.loading_status,{on_clear_status:()=>t.dispatch("clear_status",t.shared.loading_status)}));var L=e.sibling(W,2);Ee(L,{get fullscreen(){return e.get(n)},get value(){return t.props.value},get label(){return t.shared.label},get show_label(){return t.shared.show_label},get selectable(){return t.props._selectable},get i18n(){return t.i18n},get buttons(){return t.props.buttons},on_custom_button_click:k=>{t.dispatch("custom_button_click",{id:k})},$$events:{select:({detail:k})=>t.dispatch("select",k),share:({detail:k})=>t.dispatch("share",k),error:({detail:k})=>t.dispatch("error",k),fullscreen:({detail:k})=>{e.set(n,k,!0)}}}),e.append(F,f)},$$slots:{default:!0}})}},Y=_=>{{let p=e.derived(()=>t.props.value===null?"dashed":"solid"),Z=e.derived(()=>e.get(z)?"focus":"base"),F=e.derived(()=>t.props.height||void 0);we(_,{get visible(){return t.shared.visible},get variant(){return e.get(p)},get border_mode(){return e.get(Z)},padding:!1,get elem_id(){return t.shared.elem_id},get elem_classes(){return t.shared.elem_classes},get height(){return e.get(F)},get width(){return t.props.width},allow_overflow:!1,get container(){return t.shared.container},get scale(){return t.shared.scale},get min_width(){return t.shared.min_width},get fullscreen(){return e.get(n)},set fullscreen(v){e.set(n,v,!0)},$$events:{dragenter:B,dragleave:B,dragover:B,drop:O},children:(v,f)=>{var W=ht(),L=e.first_child(W);{var k=q=>{ke(q,e.spread_props({get autoscroll(){return t.shared.autoscroll},get i18n(){return t.i18n}},()=>t.shared.loading_status,{on_clear_status:()=>t.dispatch("clear_status",t.shared.loading_status)}))};e.if(L,q=>{t.shared.loading_status.type==="output"&&q(k)})}var de=e.sibling(L,2);{let q=e.derived(()=>t.props.buttons===null?!0:t.props.buttons.some(i=>typeof i=="string"&&i==="fullscreen")),le=e.derived(()=>t.shared.loading_status?.status==="pending"||t.shared.loading_status?.status==="streaming"),X=e.derived(()=>t.shared.loading_status?.time_limit),j=e.derived(()=>t.shared.client?.stream);e.bind_this(vt(de,{get selectable(){return t.props._selectable},get root(){return t.shared.root},get sources(){return t.props.sources},get fullscreen(){return e.get(n)},get show_fullscreen_button(){return e.get(q)},onerror:i=>{t.shared.loading_status.status="error",t.dispatch("error",i)},get label(){return t.shared.label},get show_label(){return t.shared.show_label},get pending(){return e.get(le)},get streaming(){return t.props.streaming},get webcam_options(){return t.props.webcam_options},get stream_every(){return t.props.stream_every},get time_limit(){return e.get(X)},get max_file_size(){return t.shared.max_file_size},get i18n(){return t.i18n},upload:(...i)=>t.shared.client.upload(...i),get stream_handler(){return e.get(j)},get stream_state(){return e.get(Q)},get upload_promise(){return e.get(l)},set upload_promise(i){e.set(l,i,!0)},get active_source(){return e.get(M)},set active_source(i){e.set(M,i)},get value(){return t.props.value},set value(i){t.props.value=i},get dragging(){return e.get(z)},set dragging(i){e.set(z,i,!0)},$$events:{edit:()=>t.dispatch("edit"),clear:()=>{e.set(n,!1),t.dispatch("clear"),t.dispatch("input")},stream:({detail:i})=>{o=i,t.dispatch("stream",i)},drag:({detail:i})=>e.set(z,i,!0),upload:()=>{t.dispatch("upload"),t.dispatch("input")},select:({detail:i})=>t.dispatch("select",i),share:({detail:i})=>t.dispatch("share",i),close_stream:()=>{t.dispatch("close_stream")},fullscreen:({detail:i})=>{e.set(n,i,!0)}},children:(i,_e)=>{var $=e.comment(),te=e.first_child($);{var re=H=>{ye(H,{get i18n(){return t.i18n},type:"image",get placeholder(){return t.props.placeholder}})},ie=H=>{var ee=e.comment(),ne=e.first_child(ee);{var ae=a=>{ye(a,{get i18n(){return t.i18n},type:"clipboard",mode:"short"})},oe=a=>{Ae(a,{unpadded_box:!0,size:"large",children:(d,b)=>{Ie(d)},$$slots:{default:!0}})};e.if(ne,a=>{e.get(M)==="clipboard"?a(ae):a(oe,!1)},!0)}e.append(H,ee)};e.if(te,H=>{e.get(M)==="upload"||!e.get(M)?H(re):H(ie,!1)})}e.append(i,$)},$$slots:{default:!0}}),i=>A=i,()=>A)}e.append(v,W)},$$slots:{default:!0}})}};e.if(K,_=>{t.shared.interactive?_(Y,!1):_(G)})}e.append(C,y),e.pop()}export{Kt as BaseExample,Je as BaseImage,vt as BaseImageUploader,Ee as BaseStaticImage,_t as Webcam,Vt as default};
