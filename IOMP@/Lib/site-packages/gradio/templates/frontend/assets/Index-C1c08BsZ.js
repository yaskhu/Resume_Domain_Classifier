import"./svelte/svelte_internal_flags_async.js";import*as e from"./svelte/svelte_internal_client.js";import"./i18n-IeFj-zpk.js";import{G as q}from"./utils.svelte-NGrRZh7a.js";import{B as A,d as Z,F as K,e as Q}from"./ScrollFade-YiJdnYV-.js";import"./svelte/svelte_internal_flags_legacy.js";import"./svelte/svelte_svelte.js";import{S as R}from"./StreamingBar-CdRfiLdf.js";import"./svelte/svelte_store.js";import"./index-VELz1aW8.js";import"./svelte/svelte_animate.js";import"./svelte/svelte_attachments.js";import"./svelte/svelte_easing.js";import"./svelte/svelte_internal_flags_tracing.js";import"./svelte/svelte_internal_server.js";import"./svelte/svelte_legacy.js";import"./svelte/svelte_motion.js";import"./svelte/svelte_reactivity.js";import"./svelte/svelte_reactivity_window.js";import"./svelte/svelte_server.js";import"./svelte/svelte_transition.js";import"./svelte/svelte_events.js";import"./MarkdownCode-DtcflbAZ.js";import"./prism-python-BAjd7o3F.js";var X=e.from_svg('<svg width="100%" height="100%" viewBox="0 0 14 17" version="1.1" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"><g transform="matrix(1,0,0,1,-10.6667,-7.73588)"><path d="M12.7,24.033C12.256,24.322 11.806,24.339 11.351,24.084C10.896,23.829 10.668,23.434 10.667,22.9L10.667,9.1C10.667,8.567 10.895,8.172 11.351,7.916C11.807,7.66 12.256,7.677 12.7,7.967L23.567,14.867C23.967,15.133 24.167,15.511 24.167,16C24.167,16.489 23.967,16.867 23.567,17.133L12.7,24.033Z" style="fill:currentColor;fill-rule:nonzero;"></path></g></svg>');function Y(k){var r=X();e.append(k,r)}var $=e.from_html('<input type="checkbox"/>');function ee(k,r){e.push(r,!0);let a=e.prop(r,"value",15);var t=$();e.remove_input_defaults(t),t.__input=()=>r.onchange?.(!a());let f;e.template_effect(()=>{t.disabled=r.disabled,f=e.set_class(t,1,"svelte-3g0mcl",null,f,{disabled:r.disabled&&!a()})}),e.bind_checked(t,a),e.append(k,t),e.pop()}e.delegate(["input"]);const te="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='32'%20height='32'%20viewBox='0%200%2024%2024'%3e%3cpath%20fill='%23888888'%20d='M6%202c-1.1%200-1.99.9-1.99%202L4%2020c0%201.1.89%202%201.99%202H18c1.1%200%202-.9%202-2V8l-6-6H6zm7%207V3.5L18.5%209H13z'/%3e%3c/svg%3e",re="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3csvg%20viewBox='0%200%2032%2032'%20version='1.1'%20id='svg7'%20sodipodi:docname='light-folder-new.svg'%20inkscape:version='1.3.2%20(091e20e,%202023-11-25)'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3csodipodi:namedview%20id='namedview7'%20pagecolor='%23ffffff'%20bordercolor='%23000000'%20borderopacity='0.25'%20inkscape:showpageshadow='2'%20inkscape:pageopacity='0.0'%20inkscape:pagecheckerboard='0'%20inkscape:deskcolor='%23d1d1d1'%20inkscape:zoom='7.375'%20inkscape:cx='15.932203'%20inkscape:cy='16'%20inkscape:window-width='1312'%20inkscape:window-height='529'%20inkscape:window-x='0'%20inkscape:window-y='38'%20inkscape:window-maximized='0'%20inkscape:current-layer='svg7'%20/%3e%3cdefs%20id='defs6'%3e%3cclipPath%20id='clipPath1'%3e%3cpath%20d='m69.63%2012.145h-.052c-22.727-.292-46.47%204.077-46.709%204.122-2.424.451-4.946%202.974-5.397%205.397-.044.237-4.414%2023.983-4.122%2046.71-.292%2022.777%204.078%2046.523%204.122%2046.761.451%202.423%202.974%204.945%205.398%205.398.237.044%2023.982%204.413%2046.709%204.121%2022.779.292%2046.524-4.077%2046.761-4.121%202.423-.452%204.946-2.976%205.398-5.399.044-.236%204.413-23.981%204.121-46.709.292-22.777-4.077-46.523-4.121-46.761-.453-2.423-2.976-4.946-5.398-5.397-.238-.045-23.984-4.414-46.71-4.122'%20id='path1'%20/%3e%3c/clipPath%3e%3clinearGradient%20gradientUnits='userSpaceOnUse'%20y2='352.98'%20x2='-601.15'%20y1='663.95'%20x1='-591.02'%20id='2'%3e%3cstop%20stop-color='%23a0a0a0'%20id='stop1'%20/%3e%3cstop%20offset='1'%20stop-color='%23aaa'%20id='stop2'%20/%3e%3c/linearGradient%3e%3clinearGradient%20gradientUnits='userSpaceOnUse'%20y2='354.29'%20x2='-704.05'%20y1='647.77'%20x1='-701.19'%20id='1'%3e%3cstop%20stop-color='%23acabab'%20id='stop3'%20/%3e%3cstop%20offset='1'%20stop-color='%23d4d4d4'%20id='stop4'%20/%3e%3c/linearGradient%3e%3clinearGradient%20id='0'%20x1='59.12'%20y1='-19.888'%20x2='59.15'%20y2='-37.783'%20gradientUnits='userSpaceOnUse'%20gradientTransform='matrix(4.17478%200%200%204.16765-1069.7%20447.73)'%3e%3cstop%20stop-color='%23a0a0a0'%20id='stop5'%20/%3e%3cstop%20offset='1'%20stop-color='%23bdbdbd'%20id='stop6'%20/%3e%3c/linearGradient%3e%3c/defs%3e%3cg%20transform='matrix(.07089%200%200%20.07017%2023.295-40.67)'%20fill='%2360aae5'%20id='g7'%20style='fill:%23888888;fill-opacity:1'%3e%3cpath%20transform='matrix(.7872%200%200%20.79524%20415.34%20430.11)'%20d='m-884.1%20294.78c-4.626%200-8.349%203.718-8.349%208.335v161.41l468.19%201v-121.2c0-4.618-3.724-8.335-8.35-8.335h-272.65c-8.51.751-9.607-.377-13.812-5.981-5.964-7.968-14.969-21.443-20.84-29.21-4.712-6.805-5.477-6.02-13.292-6.02z'%20fill='url(%230)'%20color='%23000'%20id='path6'%20style='fill:%23888888;fill-opacity:1'%20/%3e%3crect%20transform='matrix(.7872%200%200%20.79524%20415.34%20430.11)'%20y='356.85'%20x='-890.28'%20height='295.13'%20width='463.85'%20fill='url(%231)'%20stroke='url(%231)'%20stroke-width='2.378'%20rx='9.63'%20id='rect6'%20style='fill:%23888888;fill-opacity:1'%20/%3e%3crect%20width='463.85'%20height='295.13'%20x='-890.28'%20y='356.85'%20transform='matrix(.7872%200%200%20.79524%20415.34%20430.11)'%20fill='none'%20stroke='url(%232)'%20stroke-linejoin='round'%20stroke-linecap='round'%20stroke-width='5.376'%20rx='9.63'%20id='rect7'%20style='fill:%23888888;fill-opacity:1'%20/%3e%3c/g%3e%3c/svg%3e";var le=e.from_html('<span class="no-checkbox svelte-6im0c4" aria-hidden="true"></span>'),ie=e.from_html('<span role="button" aria-label="expand directory" tabindex="0"><!></span>'),se=e.from_html('<span class="file-icon svelte-6im0c4"><img alt="file icon" class="svelte-6im0c4"/></span>'),ae=e.from_html('<li class="svelte-6im0c4"><span><!> <!> <span class="item-name svelte-6im0c4"> </span></span> <!></li>'),ne=e.from_html("<ul></ul>");function T(k,r){e.push(r,!0);let a=e.prop(r,"path",19,()=>[]),t=e.prop(r,"index_path",19,()=>[]),f=e.prop(r,"selected_files",19,()=>[]),n=e.prop(r,"selected_folders",19,()=>[]),C=e.prop(r,"is_selected_entirely",3,!1),u=e.prop(r,"selectable",3,!1),G=e.prop(r,"file_count",3,"multiple"),h=e.state(e.proxy([])),o=e.state(e.proxy([]));const p=l=>{e.get(o).includes(l)?e.set(o,e.get(o).filter(c=>c!==l),!0):e.set(o,[...e.get(o),l],!0)},s=l=>{e.get(o).includes(l)||e.set(o,[...e.get(o),l],!0)};(async()=>(e.set(h,await r.ls_fn(a()),!0),r.valid_for_selection&&e.set(h,[{name:".",type:"file"},...e.get(h)],!0),e.set(o,e.get(h).map((l,c)=>l.type==="folder"&&(C()||f().some(_=>_[0]===l.name))?c:null).filter(l=>l!==null),!0)))(),e.user_effect(()=>{C()&&e.get(h).forEach(l=>{r.oncheck?.({path:[...a(),l.name],checked:!0,type:l.type})})});function w(l,c,_){r.onselect?.({index:l,value:c.join("/"),selected:!0})}var m=ne();let g;e.each(m,21,()=>e.get(h),e.index,(l,c,_)=>{let x=()=>e.get(c).type,v=()=>e.get(c).name,D=()=>e.get(c).valid;const I=e.derived(()=>(x()==="file"?f():n()).some(i=>i[0]===v()&&i.length===1));var z=ae(),j=e.child(z);let L;j.__click=i=>{i.stopPropagation(),u()&&w([...t(),_],[...a(),v()],x())},j.__keydown=i=>{u()&&(i.key===" "||i.key==="Enter")&&w([...t(),_],[...a(),v()],x())};var P=e.child(j);{var H=i=>{var d=e.comment(),B=e.first_child(d);{var U=F=>{var S=le();e.append(F,S)},b=F=>{ee(F,{disabled:!1,get value(){return e.get(I)},onchange:S=>{r.oncheck?.({path:[...a(),v()],checked:S,type:x()}),u()&&w([...t(),_],[...a(),v()],x()),x()==="folder"&&S&&s(_)}})};e.if(B,F=>{x()==="folder"&&G()==="single"?F(U):F(b,!1)})}e.append(i,d)};e.if(P,i=>{r.interactive&&i(H)})}var E=e.sibling(P,2);{var J=i=>{var d=ie();let B;d.__click=b=>{b.stopPropagation(),p(_)},d.__keydown=b=>{(b.key===" "||b.key==="Enter")&&p(_)};var U=e.child(d);Y(U),e.reset(d),e.template_effect(b=>B=e.set_class(d,1,"icon svelte-6im0c4",null,B,b),[()=>({hidden:!e.get(o).includes(_)})]),e.append(i,d)},M=i=>{var d=se(),B=e.child(d);e.reset(d),e.template_effect(()=>e.set_attribute(B,"src",v()==="."?re:te)),e.append(i,d)};e.if(E,i=>{x()==="folder"?i(J):i(M,!1)})}var O=e.sibling(E,2),N=e.child(O,!0);e.reset(O),e.reset(j);var V=e.sibling(j,2);{var W=i=>{{let d=e.derived(()=>[...a(),v()]),B=e.derived(()=>[...t(),_]),U=e.derived(()=>f().filter(y=>y[0]===v()).map(y=>y.slice(1))),b=e.derived(()=>n().filter(y=>y[0]===v()).map(y=>y.slice(1))),F=e.derived(()=>n().some(y=>y[0]===v()&&y.length===1)),S=e.derived(()=>D()??!1);T(i,{get path(){return e.get(d)},get index_path(){return e.get(B)},get selected_files(){return e.get(U)},get selected_folders(){return e.get(b)},get is_selected_entirely(){return e.get(F)},get interactive(){return r.interactive},get selectable(){return u()},get ls_fn(){return r.ls_fn},get file_count(){return G()},get valid_for_selection(){return e.get(S)},get oncheck(){return r.oncheck},get onselect(){return r.onselect}})}};e.if(V,i=>{x()==="folder"&&e.get(o).includes(_)&&i(W)})}e.reset(z),e.template_effect(()=>{L=e.set_class(j,1,"wrap svelte-6im0c4",null,L,{selected:!r.interactive&&e.get(I),selectable:u()}),e.set_attribute(j,"role",u()?"button":void 0),e.set_attribute(j,"tabindex",u()?0:void 0),e.set_text(N,v())}),e.append(l,z)}),e.reset(m),e.template_effect(()=>g=e.set_class(m,1,"svelte-6im0c4",null,g,{"no-checkboxes":!r.interactive,root:a().length===0})),e.append(k,m),e.pop()}e.delegate(["click","keydown"]);var oe=e.from_html('<div class="file-wrap svelte-1gs1iku"><!></div>');function ce(k,r){e.push(r,!0);let a=e.prop(r,"file_count",3,"multiple"),t=e.prop(r,"value",15),f=e.prop(r,"selectable",3,!1),n=e.state(e.proxy([]));const C=(p,s)=>p.join("/")===s.join("/"),u=(p,s)=>s.some(w=>C(w,p)),G=(p,s)=>p.join("/").startsWith(s.join("/"));var h=oe(),o=e.child(h);T(o,{path:[],get selected_files(){return t()},get selected_folders(){return e.get(n)},get interactive(){return r.interactive},get selectable(){return f()},get ls_fn(){return r.ls_fn},get file_count(){return a()},valid_for_selection:!1,oncheck:p=>{const{path:s,checked:w,type:m}=p;w?a()==="single"?t([s]):m==="folder"?u(s,e.get(n))||e.set(n,[...e.get(n),s],!0):u(s,t())||t([...t(),s]):(e.set(n,e.get(n).filter(g=>!G(s,g)),!0),m==="folder"?(e.set(n,e.get(n).filter(g=>!G(g,s)),!0),t(t().filter(g=>!G(g,s)))):t(t().filter(g=>!C(g,s)))),r.oninput?.()},get onselect(){return r.onselect}}),e.reset(h),e.append(k,h),e.pop()}var de=e.from_html("<!> <!> <!> <!>",1);function Pe(k,r){e.push(r,!0);const a=e.rest_props(r,["$$slots","$$events","$$legacy"]),t=new q(a,{value:[]});let f=e.state(e.proxy(t.props.value)),n=e.derived(()=>[t.props.root_dir,t.props.glob,t.props.ignore_glob]),C=e.state(e.proxy(e.get(n)));e.user_effect(()=>{JSON.stringify(e.get(C))!=JSON.stringify(e.get(n))&&e.get(f)==t.props.value&&(e.set(C,e.get(n),!0),t.props.value=[])}),e.user_effect(()=>{e.get(f)!=t.props.value&&(e.set(f,t.props.value,!0),t.dispatch("change"))});{let u=e.derived(()=>t.props.value===null?"dashed":"solid");A(k,{get visible(){return t.shared.visible},get variant(){return e.get(u)},border_mode:"base",padding:!1,get elem_id(){return t.shared.elem_id},get elem_classes(){return t.shared.elem_classes},get container(){return t.shared.container},get scale(){return t.shared.scale},get min_width(){return t.shared.min_width},allow_overflow:!0,overflow_behavior:"auto",get height(){return t.props.height},get max_height(){return t.props.max_height},get min_height(){return t.props.min_height},children:(G,h)=>{var o=de(),p=e.first_child(o);R(p,e.spread_props(()=>t.shared.loading_status,{get autoscroll(){return t.shared.autoscroll},get i18n(){return t.i18n},on_clear_status:()=>t.dispatch("clear_status",t.shared.loading_status)}));var s=e.sibling(p,2);{var w=l=>{Q(l,{get buttons(){return t.props.buttons},on_custom_button_click:c=>{t.dispatch("custom_button_click",{id:c})}})};e.if(s,l=>{t.shared.show_label&&t.props.buttons&&t.props.buttons.length>0&&l(w)})}var m=e.sibling(s,2);{let l=e.derived(()=>t.shared.label||"FileExplorer");Z(m,{get show_label(){return t.shared.show_label},get Icon(){return K},get label(){return e.get(l)},float:!1})}var g=e.sibling(m,2);e.key(g,()=>e.get(n),l=>{ce(l,{get file_count(){return t.props.file_count},get interactive(){return t.shared.interactive},get selectable(){return t.props._selectable},get ls_fn(){return t.shared.server.ls},oninput:()=>t.dispatch("input"),onselect:c=>t.dispatch("select",c),get value(){return t.props.value},set value(c){t.props.value=c}})}),e.append(G,o)},$$slots:{default:!0}})}e.pop()}export{Pe as default};
