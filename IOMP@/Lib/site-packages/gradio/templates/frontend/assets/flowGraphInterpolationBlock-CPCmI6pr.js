import{F as c}from"./KHR_interactivity-B09OAKIc.js";import{g as d,d as g,b as h,R as l}from"./declarationMapper-BT-kJ3Sq.js";import{as as y,R as F}from"./index-WPyB0dpY.js";import"./index-VELz1aW8.js";import"./svelte/svelte_svelte.js";import"./svelte/svelte_animate.js";import"./svelte/svelte_attachments.js";import"./svelte/svelte_easing.js";import"./svelte/svelte_internal_client.js";import"./svelte/svelte_internal_flags_async.js";import"./svelte/svelte_internal_flags_legacy.js";import"./svelte/svelte_internal_flags_tracing.js";import"./svelte/svelte_internal_server.js";import"./svelte/svelte_legacy.js";import"./svelte/svelte_motion.js";import"./svelte/svelte_reactivity.js";import"./svelte/svelte_reactivity_window.js";import"./svelte/svelte_server.js";import"./svelte/svelte_store.js";import"./svelte/svelte_transition.js";import"./svelte/svelte_events.js";import"./objectModelMapping-B0ewMN_K.js";class f extends c{constructor(t={}){super(t),this.keyFrames=[];const a=typeof t?.animationType=="string"?d(t.animationType):g(t?.animationType??0),e=t?.keyFramesCount??1,n=this.registerDataInput("duration_0",h,0),i=this.registerDataInput("value_0",a);this.keyFrames.push({duration:n,value:i});for(let s=1;s<e+1;s++){const u=this.registerDataInput(`duration_${s}`,h,s===e?t.duration:void 0),m=this.registerDataInput(`value_${s}`,a);this.keyFrames.push({duration:u,value:m})}this.initialValue=this.keyFrames[0].value,this.endValue=this.keyFrames[e].value,this.easingFunction=this.registerDataInput("easingFunction",l),this.animation=this.registerDataOutput("animation",l),this.propertyName=this.registerDataInput("propertyName",l,t?.propertyName),this.customBuildAnimation=this.registerDataInput("customBuildAnimation",l)}_updateOutputs(t){const a=t._getGlobalContextVariable("interpolationAnimations",[]),e=this.propertyName.getValue(t),n=this.easingFunction.getValue(t),i=this._createAnimation(t,e,n);if(this.animation.setValue(i,t),Array.isArray(i))for(const s of i)a.push(s.uniqueId);else a.push(i.uniqueId);t._setGlobalContextVariable("interpolationAnimations",a)}_createAnimation(t,a,e){const n=this.initialValue.richType,i=[],s=this.initialValue.getValue(t)||n.defaultValue;i.push({frame:0,value:s});const u=this.config?.numberOfKeyFrames??1;for(let r=1;r<u+1;r++){const p=this.keyFrames[r].duration?.getValue(t);let o=this.keyFrames[r].value?.getValue(t);r===u-1&&(o=o||n.defaultValue),p!==void 0&&o&&i.push({frame:p*60,value:o})}const m=this.customBuildAnimation.getValue(t);if(m)return m(null,null,t)(i,60,n.animationType,e);if(typeof a=="string"){const r=y.CreateAnimation(a,n.animationType,60,e);return r.setKeys(i),[r]}else return a.map(p=>{const o=y.CreateAnimation(p,n.animationType,60,e);return o.setKeys(i),o})}getClassName(){return"FlowGraphInterpolationBlock"}}F("FlowGraphInterpolationBlock",f);export{f as FlowGraphInterpolationBlock};
