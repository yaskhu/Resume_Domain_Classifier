import"./svelte/svelte_internal_flags_async.js";import*as e from"./svelte/svelte_internal_client.js";import"./i18n-IeFj-zpk.js";import{G as _e}from"./utils.svelte-NGrRZh7a.js";import{onMount as pe,tick as ve}from"./svelte/svelte_svelte.js";import{t as H}from"./tinycolor-CTCHxbWk.js";import{g as me,v as he,B as fe}from"./ScrollFade-YiJdnYV-.js";import"./svelte/svelte_internal_flags_legacy.js";import{S as ge}from"./StreamingBar-CdRfiLdf.js";import{default as tt}from"./Example-DQetu39U.js";import"./svelte/svelte_store.js";import"./index-VELz1aW8.js";import"./svelte/svelte_animate.js";import"./svelte/svelte_attachments.js";import"./svelte/svelte_easing.js";import"./svelte/svelte_internal_flags_tracing.js";import"./svelte/svelte_internal_server.js";import"./svelte/svelte_legacy.js";import"./svelte/svelte_motion.js";import"./svelte/svelte_reactivity.js";import"./svelte/svelte_reactivity_window.js";import"./svelte/svelte_server.js";import"./svelte/svelte_transition.js";import"./svelte/svelte_events.js";import"./MarkdownCode-DtcflbAZ.js";import"./prism-python-BAjd7o3F.js";function be(a,n){const o=t=>{a&&!a.contains(t.target)&&!t.defaultPrevented&&n(t)};return document.addEventListener("mousedown",o,!0),{destroy(){document.removeEventListener("mousedown",o,!0)}}}function V(a){const n=a.s,o=a.v;let t=n*o;const h=a.h/60;let d=t*(1-Math.abs(h%2-1));const c=o-t;t=t+c,d=d+c;const _=Math.floor(h)%6,v=[t,d,c,c,d,t][_],f=[d,t,t,d,c,c][_],m=[c,c,d,t,t,d][_];return`rgba(${v*255}, ${f*255}, ${m*255}, ${a.a})`}function we(a,n){return n==="hex"?H(a).toHexString():n==="rgb"?H(a).toRgbString():H(a).toHslString()}var ye=e.from_html("<button> </button>"),xe=e.from_html('<div class="color-picker svelte-nbn1m9"><div class="color-gradient svelte-nbn1m9"><div class="marker svelte-nbn1m9"></div></div> <div class="hue-slider svelte-nbn1m9"><div class="marker svelte-nbn1m9"></div></div> <div class="input svelte-nbn1m9"><button class="swatch svelte-nbn1m9"></button> <div><div class="input-wrap svelte-nbn1m9"><input type="text" class="svelte-nbn1m9"/> <button class="eyedropper svelte-nbn1m9"><!></button></div> <div class="buttons svelte-nbn1m9"></div></div></div></div>'),ke=e.from_html('<!> <button class="dialog-button svelte-nbn1m9"></button> <!>',1);function Be(a,n){e.push(n,!0);let o=e.prop(n,"value",15),t=e.prop(n,"on_input",3,()=>{}),h=e.prop(n,"on_submit",3,()=>{}),d=e.prop(n,"on_blur",3,()=>{}),c=e.prop(n,"on_focus",3,()=>{}),_=e.state(!1),v=e.state("hex"),f=!1,m,g,b=[0,0],u=null,E=!1,R=[0,0],k=0,S=0,p=null,C=!1;function W(r){p=r.currentTarget.getBoundingClientRect(),C=!0,P(r.clientX)}function P(r){if(!p)return;const s=Math.max(0,Math.min(r-p.left,p.width));S=s;const i=s/p.width*360;k=i,o(V({h:i,s:R[0],v:R[1],a:1})),t()()}function T(r,s){if(!u)return;const i=Math.max(0,Math.min(r-u.left,u.width)),y=Math.max(0,Math.min(s-u.top,u.height));b=[i,y];const x={h:k*1,s:i/u.width,v:1-y/u.height,a:1};R=[x.s,x.v],o(V(x)),t()()}function Z(r){E=!0,u=r.currentTarget.getBoundingClientRect(),T(r.clientX,r.clientY)}function ee(r){E&&T(r.clientX,r.clientY),C&&P(r.clientX)}function te(){E=!1,C=!1}async function L(r){if(E||C||(await ve(),!r)||(!u&&m&&(u=m.getBoundingClientRect()),!p&&g&&(p=g.getBoundingClientRect()),!u||!p))return;const s=H(r).toHsv(),i=s.s*u.width,y=(1-s.v)*u.height;b=[i,y],R=[s.s,s.v],k=s.h,S=s.h/360*p.width}function re(){new EyeDropper().open().then(s=>{o(s.sRGBHex)}),t()()}const ne=[["Hex","hex"],["RGB","rgb"],["HSL","hsl"]];let Y=e.derived(()=>we(o(),e.get(v)));pe(async()=>{f=window!==void 0&&!!window.EyeDropper});function se(){e.set(_,!1)}e.user_effect(()=>{L(o())});var q=ke();e.event("mousemove",e.window,ee),e.event("mouseup",e.window,te);var I=e.first_child(q);me(I,{get show_label(){return n.show_label},get info(){return n.info},children:(r,s)=>{e.next();var i=e.text();e.template_effect(()=>e.set_text(i,n.label)),e.append(r,i)},$$slots:{default:!0}});var w=e.sibling(I,2);w.__click=()=>{L(o()),e.set(_,!e.get(_))};let j;var oe=e.sibling(w,2);{var ie=r=>{var s=xe(),i=e.child(s);i.__mousedown=Z;var y=e.child(i);let x;e.reset(i),e.bind_this(i,l=>m=l,()=>m);var B=e.sibling(i,2);B.__mousedown=W;var le=e.child(B);let z;e.reset(B),e.bind_this(B,l=>g=l,()=>g);var A=e.sibling(B,2),F=e.child(A);let J;var K=e.sibling(F,2),X=e.child(K),$=e.child(X);e.remove_input_defaults($),$.__change=l=>{o(l.currentTarget.value)},$.__keydown=l=>{l.key==="Enter"&&h()()};var D=e.sibling($,2);D.__click=re;var ae=e.child(D);{var ue=l=>{he(l)};e.if(ae,l=>{f&&l(ue)})}e.reset(D),e.reset(X);var N=e.sibling(X,2);e.each(N,21,()=>ne,e.index,(l,G,Me,Ee)=>{var O=e.derived(()=>e.to_array(e.get(G),2));let de=()=>e.get(O)[0],Q=()=>e.get(O)[1];var M=ye();let U;M.__click=()=>{e.set(v,Q(),!0)};var ce=e.child(M,!0);e.reset(M),e.template_effect(()=>{U=e.set_class(M,1,"button svelte-nbn1m9",null,U,{active:e.get(v)===Q()}),e.set_text(ce,de())}),e.append(l,M)}),e.reset(N),e.reset(K),e.reset(A),e.reset(s),e.action(s,(l,G)=>be?.(l,G),()=>se),e.template_effect(()=>{e.set_style(i,`--hue:${k??""}`),x=e.set_style(y,"",x,{transform:`translate(${b[0]??""}px,${b[1]??""}px)`,background:o()}),z=e.set_style(le,"",z,{background:"hsl("+k+", 100%, 50%)",transform:`translateX(${S??""}px)`}),J=e.set_style(F,"",J,{background:o()})}),e.bind_value($,()=>e.get(Y),l=>e.set(Y,l)),e.append(r,s)};e.if(oe,r=>{e.get(_)&&r(ie)})}e.template_effect(()=>{w.disabled=n.disabled,j=e.set_style(w,"",j,{background:o()})}),e.event("focus",w,function(...r){c()?.apply(this,r)}),e.event("blur",w,function(...r){d()?.apply(this,r)}),e.append(a,q),e.pop()}e.delegate(["click","mousedown","change","keydown"]);var $e=e.from_html("<!> <!>",1);function We(a,n){e.push(n,!0);let o=e.rest_props(n,["$$slots","$$events","$$legacy"]);const t=new _e(o,{value:"#000000"});let h=e.state(e.proxy(t.props.value)),d=e.derived(()=>t.shared.label||t.i18n("color_picker.color_picker"));e.user_effect(()=>{e.get(h)!==t.props.value&&(e.set(h,t.props.value,!0),t.dispatch("change"))}),fe(a,{get visible(){return t.shared.visible},get elem_id(){return t.shared.elem_id},get elem_classes(){return t.shared.elem_classes},get container(){return t.shared.container},get scale(){return t.shared.scale},get min_width(){return t.shared.min_width},children:(c,_)=>{var v=$e(),f=e.first_child(v);ge(f,e.spread_props({get autoscroll(){return t.shared.autoscroll},get i18n(){return t.i18n}},()=>t.shared.loading_status,{on_clear_status:()=>t.dispatch("clear_status",t.shared.loading_status)}));var m=e.sibling(f,2);{let g=e.derived(()=>!t.shared.interactive);Be(m,{get label(){return e.get(d)},get info(){return t.props.info},get show_label(){return t.shared.show_label},get disabled(){return e.get(g)},on_input:()=>t.dispatch("input"),on_submit:()=>t.dispatch("submit"),on_blur:()=>t.dispatch("blur"),on_focus:()=>t.dispatch("focus"),get value(){return t.props.value},set value(b){t.props.value=b}})}e.append(c,v)},$$slots:{default:!0}}),e.pop()}export{Be as BaseColorPicker,tt as BaseExample,We as default};
