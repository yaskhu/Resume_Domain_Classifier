import { d as derived, w as writable, g as get } from './async-DWBXLqlH.js';
import { h as head, a as attr, e as ensure_array_like, s as store_get, b as spread_props, u as unsubscribe_stores, c as bind_props, d as attr_class, f as html, g as attr_style } from './index-D1re1cuM.js';
import { r as run } from './legacy-server-Dv3YIwSp.js';
import { s as setContext, g as getContext } from './context-BZS6UlnY.js';
import { Embed as at, AppTree as nt } from './index-B73ahf_0.js';
import { i as is, c as cs, f as fs } from './2-C3I2NxUJ.js';
import { e, s } from './dev-fallback-Bc5Ork7Y.js';
import { A } from './client-Dhln8rSh.js';
import { a } from './index5-BoOEKc6P.js';
import './MarkdownCode.svelte_svelte_type_style_lang-A-Es8TiR.js';
import { d, $, m } from './utils.svelte-Cx-zzaP-.js';
import { W, I } from './state.svelte-BHvoECzk.js';
import { o } from './BaseForm-CR4XnUBa.js';
import { p as pt } from './Textbox-h3UgwCxu.js';
import { G } from './Block-C1l7qmeM.js';
import { B } from './Button-BJlYOWIZ.js';
import { y } from './Index.svelte_svelte_type_style_lang-X-YLfSOZ.js';
import { e as escape_html } from './escaping-CBnpiEl5.js';
import './uneval-ZBzcyJ66.js';
import './clone-CubQhOZi.js';
import './index-server-D4bj_1UO.js';
import './index6-vb2nI4_V.js';
import './exports-B0sj9J0y.js';
import './prism-python-BGHJcX3U.js';
import './index35-BXnw0CDT.js';
import 'path';
import 'url';
import 'fs';
import './spring-D6sHki8W.js';
import './BlockTitle-BNjrEgCM.js';
import './Info-Bps8Lgf7.js';
import './MarkdownCode-CMmyBDXN.js';
import './IconButton-C2_XRZp7.js';
import './Check-BB0k-IQt.js';
import './Copy-Cs57vtBT.js';
import './Send-sAzByYjt.js';
import './Square-DwNteyXt.js';
import './IconButtonWrapper-BI5v6wo4.js';
import './Image-Dl2g0mq0.js';
import './index3-Cz5Llrg3.js';
import './Clear-CTfKb9Id.js';

const mt=()=>{const s$1=s?A:getContext("__svelte__");return {page:{subscribe:s$1.page.subscribe},navigating:{subscribe:s$1.navigating.subscribe},updated:s$1.updated}},Gt={subscribe(s){return (e?Vt("page"):mt().page).subscribe(s)}};function Vt(s){try{return mt()[s]}catch{throw new Error(`Cannot subscribe to '${s}' store on the server outside of a Svelte component, as it is bound to the current request via component context. This prevents state from leaking between users.For more information, see https://svelte.dev/docs/kit/state-management#avoid-shared-state-on-the-server`)}}var Wt=()=>{const s=document.createElement("link");s.href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:ital,wght@0,200;0,300;0,400;0,600;0,700;0,900;1,200;1,300;1,400;1,600;1,700;1,900&display=swap",s.rel="stylesheet";const t=document.createElement("link");t.href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;600;700&display=swap",t.rel="stylesheet",document.head.appendChild(s),document.head.appendChild(t);},Zt=()=>{const s=document.createElement("div");return s.style.backgroundImage="linear-gradient(to top, #f9fafb, white)",s.style.border="1px solid #e5e7eb",s.style.borderRadius="0.75rem",s.style.boxShadow="0 0 10px rgba(0, 0, 0, 0.1)",s.style.color="#374151",s.style.display="flex",s.style.flexDirection="row",s.style.alignItems="center",s.style.height="40px",s.style.justifyContent="space-between",s.style.overflow="hidden",s.style.position="fixed",s.style.right=".75rem",s.style.top=".75rem",s.style.width="auto",s.style.zIndex="20",s.style.paddingLeft="1rem",s.setAttribute("id","huggingface-space-header"),window.matchMedia("(max-width: 768px)").addEventListener("change",t=>{t.matches?s.style.display="none":s.style.display="flex";}),s},Ht=()=>{const s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.setAttribute("xmlns","http://www.w3.org/2000/svg"),s.setAttribute("xmlns:link","http://www.w3.org/1999/xlink"),s.setAttribute("aria-hidden","true"),s.setAttribute("focusable","false"),s.setAttribute("role","img"),s.setAttribute("width","1em"),s.setAttribute("height","1em"),s.setAttribute("preserveAspectRatio","xMidYMid meet"),s.setAttribute("viewBox","0 0 12 12"),s.setAttribute("fill","currentColor");const t=document.createElementNS("http://www.w3.org/2000/svg","path");return t.setAttribute("d","M0.375001 10.3828L0.375 1.61719C0.375 1.104 0.816001 0.687501 1.35938 0.687501L10.6406 0.6875C10.9017 0.6875 11.1521 0.785449 11.3367 0.959797C11.5213 1.13415 11.625 1.37062 11.625 1.61719V10.3828C11.625 10.6294 11.5213 10.8659 11.3367 11.0402C11.1521 11.2145 10.9017 11.3125 10.6406 11.3125H1.35938C0.816001 11.3125 0.375001 10.896 0.375001 10.3828ZM1.35938 10.5156H10.6406C10.7183 10.5156 10.7813 10.4561 10.7813 10.3828V4.40625H1.21875V10.3828C1.21875 10.418 1.23356 10.4518 1.25994 10.4767C1.28631 10.5017 1.32208 10.5156 1.35938 10.5156ZM4.61052 6.38251L5.9999 7.69472L7.38927 6.38251C7.44083 6.33007 7.50645 6.29173 7.57913 6.27153C7.6518 6.25134 7.72898 6.25003 7.8024 6.26776C7.87583 6.28549 7.9428 6.3216 7.99628 6.37227C8.04983 6.42295 8.08785 6.48631 8.10645 6.5557C8.12528 6.62497 8.12393 6.69773 8.10263 6.76635C8.0814 6.83497 8.0409 6.8969 7.98555 6.94564L6.29802 8.53936C6.21892 8.61399 6.11169 8.65592 5.9999 8.65592C5.8881 8.65592 5.78087 8.61399 5.70177 8.53936L4.01427 6.94564C3.95874 6.89694 3.91814 6.835 3.89676 6.76633C3.87538 6.69766 3.874 6.62483 3.89277 6.55549C3.91154 6.48615 3.94977 6.42287 4.00343 6.37233C4.05708 6.32179 4.12418 6.28585 4.19765 6.2683C4.27098 6.25054 4.34803 6.25178 4.42068 6.27188C4.49334 6.29198 4.55891 6.3302 4.61052 6.38251Z"),s.appendChild(t),s},Jt=(s,t)=>{const i=document.createElement("div");return i.setAttribute("id","space-header__collapse"),i.style.display="flex",i.style.flexDirection="row",i.style.alignItems="center",i.style.justifyContent="center",i.style.fontSize="16px",i.style.paddingLeft="10px",i.style.paddingRight="10px",i.style.height="40px",i.style.cursor="pointer",i.style.color="#40546e",i.style.transitionDuration="0.1s",i.style.transitionProperty="all",i.style.transitionTimingFunction="ease-in-out",i.appendChild(Ht()),i.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),t();}),i.addEventListener("mouseenter",()=>{i.style.color="#213551";}),i.addEventListener("mouseleave",()=>{i.style.color="#40546e";}),i},Yt=s=>{const t=document.createElement("p");return t.style.margin="0",t.style.padding="0",t.style.color="#9ca3af",t.style.fontSize="14px",t.style.fontFamily="Source Sans Pro, sans-serif",t.style.padding="0px 6px",t.style.borderLeft="1px solid #e5e7eb",t.style.marginLeft="4px",t.textContent=(s??0).toString(),t},Kt=()=>{const s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.setAttribute("xmlns","http://www.w3.org/2000/svg"),s.setAttribute("xmlns:link","http://www.w3.org/1999/xlink"),s.setAttribute("aria-hidden","true"),s.setAttribute("focusable","false"),s.setAttribute("role","img"),s.setAttribute("width","1em"),s.setAttribute("height","1em"),s.setAttribute("preserveAspectRatio","xMidYMid meet"),s.setAttribute("viewBox","0 0 32 32"),s.setAttribute("fill","#6b7280");const t=document.createElementNS("http://www.w3.org/2000/svg","path");return t.setAttribute("d","M22.45,6a5.47,5.47,0,0,1,3.91,1.64,5.7,5.7,0,0,1,0,8L16,26.13,5.64,15.64a5.7,5.7,0,0,1,0-8,5.48,5.48,0,0,1,7.82,0L16,10.24l2.53-2.58A5.44,5.44,0,0,1,22.45,6m0-2a7.47,7.47,0,0,0-5.34,2.24L16,7.36,14.89,6.24a7.49,7.49,0,0,0-10.68,0,7.72,7.72,0,0,0,0,10.82L16,29,27.79,17.06a7.72,7.72,0,0,0,0-10.82A7.49,7.49,0,0,0,22.45,4Z"),s.appendChild(t),s},Qt=s=>{const t=document.createElement("a");return t.setAttribute("href",`https://huggingface.co/spaces/${s.id}`),t.setAttribute("rel","noopener noreferrer"),t.setAttribute("target","_blank"),t.style.border="1px solid #e5e7eb",t.style.borderRadius="6px",t.style.display="flex",t.style.flexDirection="row",t.style.alignItems="center",t.style.margin="0 0 0 12px",t.style.fontSize="14px",t.style.paddingLeft="4px",t.style.textDecoration="none",t.appendChild(Kt()),t.appendChild(Yt(s.likes)),t},Xt=(s,t="user")=>{const i=t==="user"?"users":"organizations",e=document.createElement("img");return e.src=`https://huggingface.co/api/${i}/${s}/avatar`,e.style.width="0.875rem",e.style.height="0.875rem",e.style.borderRadius="50%",e.style.flex="none",e.style.marginRight="0.375rem",e},$t=s=>{const[t,i]=s.split("/"),e=document.createElement("a");return e.setAttribute("href",`https://huggingface.co/spaces/${s}`),e.setAttribute("rel","noopener noreferrer"),e.setAttribute("target","_blank"),e.style.color="#1f2937",e.style.textDecoration="none",e.style.fontWeight="600",e.style.fontSize="15px",e.style.lineHeight="24px",e.style.flex="none",e.style.fontFamily="IBM Plex Mono, sans-serif",e.addEventListener("mouseover",()=>{e.style.color="#2563eb";}),e.addEventListener("mouseout",()=>{e.style.color="#1f2937";}),e.textContent=i,e},te=()=>{const s=document.createElement("div");return s.style.marginLeft=".125rem",s.style.marginRight=".125rem",s.style.color="#d1d5db",s.textContent="/",s},ee=s=>{const t=document.createElement("a");return t.setAttribute("href",`https://huggingface.co/${s}`),t.setAttribute("rel","noopener noreferrer"),t.setAttribute("target","_blank"),t.style.color="rgb(107, 114, 128)",t.style.textDecoration="none",t.style.fontWeight="400",t.style.fontSize="16px",t.style.lineHeight="24px",t.style.flex="none",t.style.fontFamily="Source Sans Pro, sans-serif",t.addEventListener("mouseover",()=>{t.style.color="#2563eb";}),t.addEventListener("mouseout",()=>{t.style.color="rgb(107, 114, 128)";}),t.textContent=s,t},se=s=>{const t=document.createElement("div");return t.style.display="flex",t.style.flexDirection="row",t.style.alignItems="center",t.style.justifyContent="center",t.style.borderRight="1px solid #e5e7eb",t.style.paddingRight="12px",t.style.height="40px",s.type!=="unknown"&&t.appendChild(Xt(s.author,s.type)),t.appendChild(ee(s.author)),t.appendChild(te()),t.appendChild($t(s.id)),t.appendChild(Qt(s)),t},ie=s=>{const t=Zt(),i=()=>t.style.display="none";return t.appendChild(se(s)),t.appendChild(Jt(s,i)),t},ht=async(s,t="user")=>{const i=t==="user"?"users":"organizations";try{return (await fetch(`https://huggingface.co/api/${i}/${s}/avatar`)).ok}catch{return  false}},ne=async s=>{try{return await(await fetch(`https://huggingface.co/api/spaces/${s}`)).json()}catch{return null}},ae=(s,t)=>{if(document.body===null)return console.error("document.body is null");document.body.appendChild(s);};async function oe(s,t){if(window===void 0)return console.error("Please run this script in a browser environment");if(Object.values(window.location?.ancestorOrigins??{0:window.document.referrer}).some(p=>new URL(p)?.origin==="https://huggingface.co"))return;Wt();let e;if(typeof s=="string"){if(e=await ne(s),e===null)return console.error("Space not found")}else e=s;const[n,a]=await Promise.all([ht(e.author,"user"),ht(e.author,"org")]);e.type=n?"user":a?"org":"unknown";const r=ie(e);return ae(r),{element:r}}var re=(s,t)=>oe(s);function bt(s$1,t){s$1.component(i=>{let{node:e}=t;var n,a=i.run([async()=>n=await e.component]);i.async_block([a[0]],r=>{e&&n?(r.push("<!--[-->"),r.async_block([a[0]],p=>{e.props.shared_props.visible?(p.push("<!--[-->"),p.async_block([a[0]],m=>{m.push("<!---->"),n.default?.(m,{shared_props:e.props.shared_props,props:e.props.props,children:C=>{C.async_block([a[0]],E=>{e.children&&e.children.length?(E.push("<!--[-->"),E.push("<!--[-->"),E.async_block([a[0]],h=>{const x=ensure_array_like(e.children);for(let y=0,D=x.length;y<D;y++){let d=x[y];bt(h,{node:d});}}),E.push("<!--]-->")):E.push("<!--[!-->");}),C.push("<!--]-->");},$$slots:{default:true}});})):p.push("<!--[!-->");}),r.push("<!--]-->")):r.push("<!--[!-->");}),i.push("<!--]-->");});}function le(s){if(s==null)return "";const t=String(s),i=get(is);if(t.includes(d))return $(t,i);const e=i(t);return e!==t?e:t}const j=derived(is,()=>le),ce="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='576'%20height='576'%20viewBox='0%200%20576%20576'%20fill='none'%3e%3cpath%20d='M287.5%20229L86%20344.5L287.5%20460L489%20344.5L287.5%20229Z'%20stroke='url(%23paint0_linear_102_7)'%20stroke-width='59'%20stroke-linejoin='round'/%3e%3cpath%20d='M287.5%20116L86%20231.5L287.5%20347L489%20231.5L287.5%20116Z'%20stroke='url(%23paint1_linear_102_7)'%20stroke-width='59'%20stroke-linejoin='round'/%3e%3cpath%20d='M86%20344L288%20229'%20stroke='url(%23paint2_linear_102_7)'%20stroke-width='59'%20stroke-linejoin='bevel'/%3e%3cdefs%3e%3clinearGradient%20id='paint0_linear_102_7'%20x1='60'%20y1='341'%20x2='429.5'%20y2='344'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23F9D100'/%3e%3cstop%20offset='1'%20stop-color='%23F97700'/%3e%3c/linearGradient%3e%3clinearGradient%20id='paint1_linear_102_7'%20x1='513.5'%20y1='231'%20x2='143.5'%20y2='231'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23F9D100'/%3e%3cstop%20offset='1'%20stop-color='%23F97700'/%3e%3c/linearGradient%3e%3clinearGradient%20id='paint2_linear_102_7'%20x1='60'%20y1='344'%20x2='428.987'%20y2='341.811'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23F9D100'/%3e%3cstop%20offset='1'%20stop-color='%23F97700'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e",ue="data:image/svg+xml,%3csvg%20width='28'%20height='28'%20viewBox='0%200%2028%2028'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M26.9425%202.94265C27.4632%202.42195%2027.4632%201.57773%2026.9425%201.05703C26.4218%200.536329%2025.5776%200.536329%2025.0569%201.05703L22.5713%203.54256C21.1213%202.59333%2019.5367%202.43378%2018.1753%202.64006C16.5495%202.88638%2015.1127%203.66838%2014.3905%204.39053L12.3905%206.39053C12.1405%206.64058%2012%206.97972%2012%207.33334C12%207.68697%2012.1405%208.0261%2012.3905%208.27615L19.7239%2015.6095C20.2446%2016.1302%2021.0888%2016.1302%2021.6095%2015.6095L23.6095%2013.6095C24.3316%2012.8873%2025.1136%2011.4505%2025.36%209.82475C25.5663%208.46312%2025.4066%206.87827%2024.4571%205.42807L26.9425%202.94265Z'%20fill='%233c4555'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M12.276%2012.9426C12.7967%2012.4219%2012.7967%2011.5777%2012.276%2011.057C11.7553%2010.5363%2010.9111%2010.5363%2010.3904%2011.057L8.66651%2012.7809L8.27615%2012.3905C8.0261%2012.1405%207.68697%2012%207.33334%2012C6.97972%2012%206.64058%2012.1405%206.39053%2012.3905L4.39053%2014.3905C3.66838%2015.1127%202.88638%2016.5495%202.64006%2018.1753C2.43377%2019.5367%202.59333%2021.1214%203.54262%2022.5714L1.05703%2025.057C0.536329%2025.5777%200.536329%2026.4219%201.05703%2026.9426C1.57773%2027.4633%202.42195%2027.4633%202.94265%2026.9426L5.42817%2024.4571C6.87835%2025.4066%208.46315%2025.5663%209.82475%2025.36C11.4505%2025.1136%2012.8873%2024.3316%2013.6095%2023.6095L15.6095%2021.6095C16.1302%2021.0888%2016.1302%2020.2446%2015.6095%2019.7239L15.2188%2019.3332L16.9426%2017.6093C17.4633%2017.0886%2017.4633%2016.2444%2016.9426%2015.7237C16.4219%2015.203%2015.5777%2015.203%2015.057%2015.7237L13.3332%2017.4475L10.5521%2014.6665L12.276%2012.9426Z'%20fill='%23FF7C00'/%3e%3c/svg%3e",de="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20xmlns='http://www.w3.org/2000/svg'%3e%3c!--%20Outer%20gear%20teeth%20(gray)%20--%3e%3cpath%20d='M19.14%2012.94c.04-.3.06-.61.06-.94%200-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24%200-.43.17-.47.41l-.36%202.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47%200-.59.22L2.74%208.87c-.12.21-.08.47.12.61l2.03%201.58c-.05.3-.07.62-.07.94s.02.64.07.94l-2.03%201.58c-.18.14-.23.41-.12.61l1.92%203.32c.12.22.37.29.59.22l2.39-.96c.5.38%201.03.7%201.62.94l.36%202.54c.05.24.24.41.48.41h3.84c.24%200%20.44-.17.47-.41l.36-2.54c.59-.24%201.13-.56%201.62-.94l2.39.96c.22.08.47%200%20.59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12%2015.6c-1.98%200-3.6-1.62-3.6-3.6s1.62-3.6%203.6-3.6%203.6%201.62%203.6%203.6-1.62%203.6-3.6%203.6z'%20fill='%23808080'/%3e%3c!--%20Inner%20circle%20(now%20gray)%20--%3e%3ccircle%20cx='12'%20cy='12'%20r='2.5'%20fill='%23808080'/%3e%3c/svg%3e",pe="data:image/svg+xml,%3csvg%20viewBox='0%200%2020%2020'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20fill='%23000000'%3e%3cg%20id='SVGRepo_bgCarrier'%20stroke-width='0'%3e%3c/g%3e%3cg%20id='SVGRepo_tracerCarrier'%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3c/g%3e%3cg%20id='SVGRepo_iconCarrier'%3e%3ctitle%3erecord%20[%23982]%3c/title%3e%3cdesc%3eCreated%20with%20Sketch.%3c/desc%3e%3cdefs%3e%3c/defs%3e%3cg%20id='Page-1'%20stroke='none'%20stroke-width='1'%20fill='none'%20fill-rule='evenodd'%3e%3cg%20id='Dribbble-Light-Preview'%20transform='translate(-380.000000,%20-3839.000000)'%20fill='%23FF0000'%3e%3cg%20id='icons'%20transform='translate(56.000000,%20160.000000)'%3e%3cpath%20d='M338,3689%20C338,3691.209%20336.209,3693%20334,3693%20C331.791,3693%20330,3691.209%20330,3689%20C330,3686.791%20331.791,3685%20334,3685%20C336.209,3685%20338,3686.791%20338,3689%20M334,3697%20C329.589,3697%20326,3693.411%20326,3689%20C326,3684.589%20329.589,3681%20334,3681%20C338.411,3681%20342,3684.589%20342,3689%20C342,3693.411%20338.411,3697%20334,3697%20M334,3679%20C328.477,3679%20324,3683.477%20324,3689%20C324,3694.523%20328.477,3699%20334,3699%20C339.523,3699%20344,3694.523%20344,3689%20C344,3683.477%20339.523,3679%20334,3679'%20id='record-[%23982]'%3e%3c/path%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e",_e=/^'([^]+)'$/,ft=Symbol("NOVALUE");class he{id;inputs;outputs;cancels;pending=false;trigger_modes;event_args={};targets=[];connection_type;triggers=[];original_trigger_id=null;show_progress_on=null;component_prop_inputs=[];show_progress;functions;constructor(t){this.id=t.id,this.original_trigger_id=t.id,this.inputs=t.inputs,this.outputs=t.outputs,this.connection_type=t.connection,this.show_progress=t.show_progress,this.functions={frontend:t.js?be(t.js,t.backend_fn,t.inputs.length,t.outputs.length):void 0,backend:t.backend_fn,backend_js:t.js_implementation?new fs(`let result = await (${t.js_implementation})(...arguments);
						return (!Array.isArray(result)) ? [result] : result;`):void 0},this.targets=t.targets,this.cancels=t.cancels,this.trigger_modes=t.trigger_mode,this.show_progress_on=t.show_progress_on||null,this.component_prop_inputs=t.component_prop_inputs||[];for(let i=0;i<t.event_specific_args?.length;i++){const e=t.event_specific_args[i];this.event_args[e]=t[e]??null;}}async run(t,i,e,n){let a=i;return this.functions.backend_js?{type:"data",data:await this.functions.backend_js(...a)}:(this.functions.frontend&&(a=await this.functions.frontend(i)),this.functions.backend?{type:"submit",data:t.submit(this.id,a,e,n,void 0,{"x-gradio-user":"app"})}:this.functions.frontend?{type:"data",data:a}:{type:"void",data:null})}add_trigger(t,i){this.triggers.push([t,i]);}get_triggers(){return {success:this.triggers.filter(([,t])=>t==="success").map(([t])=>t),failure:this.triggers.filter(([,t])=>t==="failure").map(([t])=>t),all:this.triggers.filter(([,t])=>t==="all").map(([t])=>t)}}}class fe{dependencies_by_fn=new Map;dependencies_by_event=new Map;render_id_deps=new Map;submissions=new Map;client;queue=new Set;add_to_api_calls;update_state_cb;get_state_cb;rerender_cb;log_cb;loading_stati=new W;constructor(t,i,e,n,a,r,p){this.add_to_api_calls=p,this.log_cb=r,this.update_state_cb=e,this.get_state_cb=n,this.rerender_cb=a,this.client=i,this.reload(t,e,n,a,i);}reload(t,i,e,n,a){const{by_id:r,by_event:p}=this.create(t);this.dependencies_by_event=p,this.dependencies_by_fn=r,this.client=a,this.update_state_cb=i,this.get_state_cb=e,this.rerender_cb=n;for(const[m,C]of this.dependencies_by_fn)for(const[E]of C.targets)this.set_event_args(E,C.event_args);this.register_loading_stati(r);}register_loading_stati(t){for(const[i,e]of t)this.loading_stati.register(e.id,e.show_progress_on||e.outputs,e.inputs,e.show_progress);}clear_loading_status(t){this.loading_stati.clear(t);}async update_loading_stati_state(){for(const[t,i]of Object.entries(this.loading_stati.current))this.update_state_cb(Number(t),{loading_status:i},false);}dispatch_state_change_events(t){if(t.changed_state_ids)for(const i of t.changed_state_ids)this.dependencies_by_event.get("change-"+i)?.forEach(n=>{this.dispatch({type:"fn",fn_index:n.id,target_id:i,event_data:null});});}async dispatch(t){let i;if(t.type==="fn"){const e=this.dependencies_by_fn.get(t.fn_index);e&&(i=[e]);}else i=this.dependencies_by_event.get(`${t.event_name}-${t.target_id}`);for(let e=0;e<(i?.length||0);e++){const n=i?i[e]:void 0;if(n){this.cancel(n.cancels);const a=me(n.trigger_modes,this.submissions.has(n.id));if(a==="skip")continue;if(a==="defer"){this.queue.add(n.id);continue}n.functions.backend&&(this.loading_stati.update({status:"pending",fn_index:n.id,stream_state:null}),this.update_loading_stati_state());const r=await this.gather_state(n.inputs,n.component_prop_inputs),p=await Promise.all(n.targets.map(([h])=>this.set_event_args(h,n.event_args))),{success:m,failure:C,all:E}=n.get_triggers();try{let h=null;if(t.target_id!==void 0||t.type==="event"?h=t.target_id||null:h=n.original_trigger_id,n.connection_type==="stream"&&this.submissions.has(n.id)){const y=this.submissions.get(n.id);let D={fn_index:n.id,data:r,event_data:t.event_data};y.send_chunk(D),p.forEach(d=>d());continue}this.add_to_api_calls({fn_index:n.id,data:r,event_data:t.event_data,trigger_id:h});const x=await n.run(this.client,r,t.event_data,h);if(x.type==="void")p.forEach(y=>y());else if(x.type==="data")await this.handle_data(n.outputs,x.data),p.forEach(y=>y());else {let y=null;n.connection_type==="stream"&&!this.submissions.has(n.id)&&(y="waiting"),this.submissions.set(n.id,x.data);let D=0;t:for await(const d of x.data)if(D===0&&n.inputs.forEach(g=>{this.update_state_cb(g,{loading_status:{validation_error:null}},!1);}),D+=1,d!==null){if(d.type==="data"&&await this.handle_data(n.outputs,d.data),d.type==="status"){d.original_msg==="process_starts"&&n.connection_type==="stream"&&(y="open");const{fn_index:g,...v}=d;if(d.stage==="complete"){y="closed",m.forEach(M=>{this.dispatch({type:"fn",fn_index:M,event_data:null,target_id:h});}),this.dispatch_state_change_events(d),this.loading_stati.update({...v,status:v.stage,fn_index:n.id,stream_state:y}),this.update_loading_stati_state();break t}else if(d.stage==="generating")this.dispatch_state_change_events(d),this.loading_stati.update({...v,status:v.stage,fn_index:n.id,stream_state:y}),this.update_loading_stati_state();else if(d.stage==="error"){if(Array.isArray(d?.message)){d.message.forEach((k,F)=>{this.update_state_cb(n.inputs[F],{loading_status:{validation_error:k.is_valid?null:k.message,show_validation_error:!0}},!1);}),n.outputs.forEach(k=>{n.inputs.includes(k)||this.update_state_cb(k,{loading_status:{status:null}},!1);}),p.forEach(k=>k()),this.submissions.delete(n.id),this.queue.has(n.id)&&(this.queue.delete(n.id),this.dispatch(t));return}const M=d?.message?.replace(_e,(k,F)=>F);throw this.log_cb(d?._title??"Error",M||"",g,"error",v.duration,v.visible),new Error("Dependency function failed")}else this.loading_stati.update({...v,status:v.stage,fn_index:n.id,stream_state:y}),this.update_loading_stati_state();}if(d.type==="render"){this.loading_stati.update({status:"complete",fn_index:n.id,stream_state:null}),this.update_loading_stati_state();const{layout:g,components:v,render_id:M,dependencies:k}=d.data;this.rerender_cb(v,g);const{by_id:F,by_event:Z}=this.create(k);this.register_loading_stati(F),F.forEach(S=>this.dependencies_by_fn.set(S.id,S)),Z.forEach((S,q)=>this.dependencies_by_event.set(q,S));const T=this.render_id_deps.get(M);T&&T.forEach(S=>{F.has(S)||this.dependencies_by_fn.delete(S);}),this.render_id_deps.set(M,new Set(Array.from(F.keys()))),this.register_loading_stati(F);break t}d.type==="log"&&this.handle_log(d);}E.forEach(d=>{this.dispatch({type:"fn",fn_index:d,event_data:null,target_id:h});}),p.forEach(d=>d()),this.submissions.delete(n.id),this.queue.has(n.id)&&(this.queue.delete(n.id),this.dispatch(t));}}catch{this.loading_stati.update({status:"error",fn_index:n.id,eta:0,queue:false,stream_state:null}),this.update_loading_stati_state(),this.submissions.delete(n.id),C.forEach(x=>{this.dispatch({type:"fn",fn_index:x,event_data:null});});}}}}create(t){const i=new Map,e=new Map,n=[];for(const a of t){const r=new he(a);for(const[p,m]of a.targets)e.has(`${m}-${p}`)||e.set(`${m}-${p}`,[]),e.get(`${m}-${p}`)?.push(r);if(i.set(a.id,r),a.trigger_after!==void 0){const p=a.trigger_only_on_failure?"failure":a.trigger_only_on_success?"success":"all";n.push([a.id,a.trigger_after,p]);}}for(const[a,r,p]of n){const m=i.get(r);m&&(m.add_trigger(a,p),m.original_trigger_id=ye(t,r));}return {by_id:i,by_event:e}}handle_log(t){const{title:i,log:e,fn_index:n,level:a,duration:r,visible:p}=t;this.log_cb(i,e,n,a,r,p);}async handle_data(t,i){await Promise.all(t.map(async(e,n)=>{const a=i[n]===void 0?ft:i[n];if(a!==ft)if(ge(a)){let r=false,p=null;for(const[m,C]of Object.entries(a))if(m!=="__type__"){if(m==="visible"){r=true,p=C;continue}await this.update_state_cb(t[n],{[m]:C},false);}r&&await this.update_state_cb(t[n],{visible:p},true);}else await this.update_state_cb(e,{value:a},false);}));}async gather_state(t,i=[]){return (await Promise.all(t.map(e=>this.get_state_cb(e)))).map((e,n)=>i.includes(n)?e??null:e?.value??null)}async set_event_args(t,i){let e={};const n=await this.get_state_cb?.(t);if(!n)return ()=>{};for(const[a]of Object.entries(i))e[a]=n?.[a]??null;return Object.keys(i).length===0?()=>{}:(await this.update_state_cb(t,i,false),()=>{this.update_state_cb(t,e,false);})}async cancel(t){if(t)for(const i of t){const e=this.submissions.get(i);if(e){await e.cancel(),this.loading_stati.update({status:"complete",fn_index:i,eta:0,queue:false,stream_state:null}),this.update_loading_stati_state(),this.submissions.delete(i);const{failure:n,all:a}=this.dependencies_by_fn.get(i)?.get_triggers()||{failure:[],all:[]};n.forEach(r=>{this.dispatch({type:"fn",fn_index:r,event_data:null,target_id:i});}),a.forEach(r=>{this.dispatch({type:"fn",fn_index:r,event_data:null,target_id:i});});}}}dispatch_load_events(){this.dependencies_by_fn.forEach(t=>{t.targets.forEach(([i,e])=>{e==="load"&&this.dispatch({type:"fn",fn_index:t.id,event_data:null,target_id:i});});});}get_fns_from_targets(t){const i=[];return this.dependencies_by_event.forEach((e,n)=>{const[,a]=n.split("-");Number(a)===t&&e.forEach(r=>{i.push(r.id);});}),i}close_stream(t){const i=this.get_fns_from_targets(t);for(const e of i){const n=this.submissions.get(e);n&&(n.close_stream(),this.submissions.delete(e)),this.loading_stati.update({status:"complete",fn_index:e,eta:0,queue:false,stream_state:"closed"});}this.update_loading_stati_state();}}function ge(s){return typeof s=="object"&&s!==null&&"__type__"in s&&s?.__type__==="update"}function me(s,t){return t?s==="always_last"?"defer":s==="multiple"?"run":s==="once"?"skip":"run":"run"}function be(s,t,i,e){const n=t?i===1:e===1;try{return new fs("__fn_args",`  let result = await (${s})(...__fn_args);
  if (typeof result === "undefined") return [];
  return (${n} && !Array.isArray(result)) ? [result] : result;`)}catch(a){throw a}}function ye(s,t){let i=new Map,e=t,n=0;for(;n<100;){const a=i.get(e)||s.find(r=>r.id===e);if(!a||(i.set(a.id,a),a.trigger_after===null||a.trigger_after===void 0))break;e=a.trigger_after,n+=1;}return e}function ve(s$1,t){s$1.component(i=>{var e;let{root:n,components:a,layout:r,dependencies:p,title:m$1,target:C,autoscroll:E,footer_links:h,control_page_title:x,app_mode:y,theme_mode:D,app:d,space_id:g,version:v,js:M,fill_height:k,username:F,api_prefix:Z,max_file_size:T,initial_layout:S,css:q,vibe_mode:N,search_params:G,render_complete:z=false,ready:Y=false,reload_count:H=0,add_new_message:P=void 0}=t;a.forEach(o=>{o.props.i18n||(o.props.i18n=store_get(e??={},"$reactive_formatter",j));});let O=[];function K(o,_,R){if(_==="share"){const{title:W,description:ut}=R;}else if(_==="error")B("Error",R,-1,_,10,true);else if(_==="warning")B("Warning",R,-1,_,10,true);else if(_==="info")B("Info",R,-1,_,10,true);else if(_==="gradio_expand"||_==="gradio_tab_select"){const W=_==="gradio_expand"?o:R.component_id;c.render_previously_invisible_children(W);}else if(_=="clear_status")c.update_state(o,{loading_status:{}},false),f.clear_loading_status(o);else if(_=="close_stream")f.close_stream(o);else if(_==="custom_button_click"){const W=R.id;tt(W,"click",null);}else _==="select"&&o in c.initial_tabs&&(o=R.id),f.dispatch({type:"event",event_name:_,target_id:o,event_data:R});}let c=new nt(a,r,p,{root:n,theme:D,version:v,api_prefix:Z,max_file_size:T,autoscroll:E},d,store_get(e??={},"$reactive_formatter",j),K);function tt(o,_,R){f.dispatch({type:"event",event_name:_,target_id:o,event_data:R});}setContext(m,{register:c.register_component.bind(c),dispatcher:K});let I$1=[],V=null,et=o=>{V=o,L&&(I$1=[...I$1,V]);},f=new fe(p,d,c.update_state.bind(c),c.get_state.bind(c),c.rerender.bind(c),B,et),u=350,w=G.get("view")==="api"&&h.includes("api"),b=G.get("view")==="settings",L=G.get("view")==="api-recorder"&&h.includes("api"),A=null,U=null;function B(o,_,R,W,ut=10,dt=false){dt&&O.push({title:o,message:_,fn_index:R,type:W,id:++yt,duration:ut,visible:dt});}P=B;let yt=-1;store_get(e??={},"$reactive_formatter",j)("blocks.long_requests_queue"),store_get(e??={},"$reactive_formatter",j)("blocks.connection_can_break"),store_get(e??={},"$reactive_formatter",j)("blocks.waiting_for_inputs");let rt=writable(false);function wt(o){O=O.filter(_=>_.id!==o);}let ct=true,it;function xt(o){head("zxu34v",o,_=>{x?(_.push("<!--[-->"),_.title(R=>{R.push(`<title>${escape_html(m$1)}</title>`);})):_.push("<!--[!-->"),_.push("<!--]--> "),q?(_.push("<!--[-->"),_.push(`${html(`<style>${cs(q,v)}</style>`)}`)):_.push("<!--[!-->"),_.push("<!--]-->");}),o.push(`<div class="wrap svelte-zxu34v"${attr_style("",{"min-height":y?"100%":"auto"})}><main class="contain svelte-zxu34v"${attr_style("",{"flex-grow":y?"1":"auto","margin-right":N?`${u}px`:"0"})}>`),bt(o,{node:c.root}),o.push("<!----></main> "),h.length>0?(o.push("<!--[-->"),o.push('<footer aria-label="Gradio footer navigation" class="svelte-zxu34v">'),h.includes("api")?(o.push("<!--[-->"),o.push('<button class="show-api svelte-zxu34v">'),d.config?.mcp_server?(o.push("<!--[-->"),o.push(`${escape_html(store_get(e??={},"$reactive_formatter",j)("errors.use_via_api_or_mcp"))}`)):(o.push("<!--[!-->"),o.push(`${escape_html(store_get(e??={},"$reactive_formatter",j)("errors.use_via_api"))}`)),o.push(`<!--]--> <img${attr("src",ue)}${attr("alt",store_get(e??={},"$reactive_formatter",j)("common.logo"))} class="svelte-zxu34v"/></button>`)):o.push("<!--[!-->"),o.push("<!--]--> "),h.includes("gradio")?(o.push("<!--[-->"),o.push(`<div class="divider show-api-divider svelte-zxu34v">·</div> <a href="https://gradio.app" class="built-with svelte-zxu34v" target="_blank" rel="noreferrer">${escape_html(store_get(e??={},"$reactive_formatter",j)("common.built_with_gradio"))} <img${attr("src",ce)}${attr("alt",store_get(e??={},"$reactive_formatter",j)("common.logo"))} class="svelte-zxu34v"/></a>`)):o.push("<!--[!-->"),o.push(`<!--]--> <button${attr_class("record svelte-zxu34v",void 0,{hidden:!store_get(e??={},"$is_screen_recording",rt)})}>${escape_html(store_get(e??={},"$reactive_formatter",j)("common.stop_recording"))} <img${attr("src",pe)}${attr("alt",store_get(e??={},"$reactive_formatter",j)("common.stop_recording"))} class="svelte-zxu34v"/></button> <div class="divider svelte-zxu34v">·</div> `),h.includes("settings")?(o.push("<!--[-->"),o.push(`<div${attr_class("divider svelte-zxu34v",void 0,{hidden:!store_get(e??={},"$is_screen_recording",rt)})}>·</div> <button class="settings svelte-zxu34v">${escape_html(store_get(e??={},"$reactive_formatter",j)("common.settings"))} <img${attr("src",de)}${attr("alt",store_get(e??={},"$reactive_formatter",j)("common.settings"))} class="svelte-zxu34v"/></button>`)):o.push("<!--[!-->"),o.push("<!--]--></footer>")):o.push("<!--[!-->"),o.push("<!--]--> "),o.push("<!--[!-->"),o.push("<!--]--> "),w&&c.root&&A||o.push("<!--[!-->"),o.push("<!--]--> "),b&&d.config&&c.root&&U||o.push("<!--[!-->"),o.push("<!--]--> "),o.push("<!--[!-->"),o.push("<!--]--></div> "),O?(o.push("<!--[-->"),I(o,{messages:O,on_close:wt})):o.push("<!--[!-->"),o.push("<!--]-->");}do ct=true,it=i.copy(),xt(it);while(!ct);i.subsume(it),e&&unsubscribe_stores(e),bind_props(t,{ready:Y,reload_count:H,add_new_message:P});});}function we(s$1,t){s$1.component(i=>{let e=t.root,n=t.auth_message,a=t.app_mode,r=t.space_id,p=t.i18n,m="",C="",E=false;const h=async()=>{const d=new FormData;d.append("username",m),d.append("password",C);const g=new URL("login",e.endsWith("/")?e:e+"/").href;let v=await fetch(g,{method:"POST",body:d});v.status===400?(E=true,m="",C=""):v.status==200&&location.reload();};let x=true,y$1;function D(d){d.push(`<div${attr_class("wrap svelte-14xt79u",void 0,{"min-h-screen":a})}>`),y(d,{variant:"panel",min_width:480,children:g=>{g.push(`<h2 class="svelte-14xt79u">${escape_html(p("login.login"))}</h2> `),n?(g.push("<!--[-->"),g.push(`<p class="auth svelte-14xt79u">${html(n)}</p>`)):g.push("<!--[!-->"),g.push("<!--]--> "),r?(g.push("<!--[-->"),g.push(`<p class="auth svelte-14xt79u">${escape_html(p("login.enable_cookies"))}</p>`)):g.push("<!--[!-->"),g.push("<!--]--> "),E?(g.push("<!--[-->"),g.push(`<p class="creds svelte-14xt79u">${escape_html(p("login.incorrect_credentials"))}</p>`)):g.push("<!--[!-->"),g.push("<!--]--> "),o(g,{children:v=>{G(v,{children:M=>{pt(M,{label:p("login.username"),lines:1,show_label:true,max_lines:1,onsubmit:h,get value(){return m},set value(k){m=k,x=false;}});},$$slots:{default:true}}),v.push("<!----> "),G(v,{children:M=>{pt(M,{label:p("login.password"),lines:1,show_label:true,max_lines:1,type:"password",onsubmit:h,get value(){return C},set value(k){C=k,x=false;}});},$$slots:{default:true}}),v.push("<!---->");},$$slots:{default:true}}),g.push("<!----> "),B(g,{size:"lg",variant:"primary",onclick:h,children:v=>{v.push(`<!---->${escape_html(p("login.login"))}`);}}),g.push("<!---->");},$$slots:{default:true}}),d.push("<!----></div>");}do x=true,y$1=i.copy(),D(y$1);while(!x);i.subsume(y$1),bind_props(t,{root:e,auth_message:n,app_mode:a,space_id:r,i18n:p});});}function Ze(s$1,t){s$1.component(i=>{var e;let {data:r,autoscroll:p=false,version:m="6-6-0",initial_height:C,app_mode:E=true,is_embed:h=false,theme_mode:x=null,control_page_title:y=true,container:D,space:d}=t;function g(f){let u;const b=new URL(window.location.toString()).searchParams.get("__theme");return u=x||b||"system",u==="dark"||u==="light"?M(f,u):u=v(f),u}function v(f){const u=w();window?.matchMedia("(prefers-color-scheme: dark)")?.addEventListener("change",w);function w(){let b=window?.matchMedia?.("(prefers-color-scheme: dark)").matches?"dark":"light";return M(f,b),b}return u}function M(f,u){const w=h?f.parentElement:document.body,b=h?f:f.parentElement;b.style.background="var(--body-background-fill)",w.classList.add("theme-loaded"),u==="dark"?w.classList.add("dark"):w.classList.remove("dark");}let k;a&&(k=g(document.body));let T="complete",S,q=false,N=false;({subscribe:writable({}).subscribe});let z=r.app;let H=false;a&&r.config&&(window.gradio_config=r.config);let P;let O;async function K(f,u){if(f&&!u&&window.self===window.top){O&&(O.remove(),O=void 0);const w=await re(f);w&&(O=w.element);}}let c=r.config,tt=(()=>{if(!a)return c.root;const f=new URL(window.location.toString()),u=new URL(c.root);return new URL(u.pathname,f).toString()})();run(()=>{c?.app_id&&c.app_id;}),run(()=>{P&&H&&(P("Error","Deep link was not valid",-1,"error",10,true),H=false);}),run(()=>{N&&S.dispatchEvent(new CustomEvent("render",{bubbles:true,cancelable:false,composed:true}));}),run(()=>{z?.config&&a&&K(z?.config?.space_id,h);});let I=true,V;function et(f){head("1gmqcbx",f,u=>{if(u.push(`<link rel="stylesheet"${attr("href",tt+"/theme.css?v="+c?.theme_hash)}/> `),c?.stylesheets){u.push("<!--[-->"),u.push("<!--[-->");const w=ensure_array_like(c.stylesheets);for(let b=0,L=w.length;b<L;b++){let A=w[b];A.startsWith("http:")||A.startsWith("https:")?(u.push("<!--[-->"),u.push(`<link rel="stylesheet"${attr("href",A)}/>`)):u.push("<!--[!-->"),u.push("<!--]-->");}u.push("<!--]-->");}else u.push("<!--[!-->");u.push('<!--]--> <link rel="manifest" href="/manifest.json"/>');}),at(f,{display:D&&h,is_embed:h,info:false,version:m,initial_height:C,space:d,pages:c.pages,current_page:c.current_page,root:c.root,components:c.components,loaded:T==="complete",fill_width:c?.fill_width||false,get wrapper(){return S},set wrapper(u){S=u,I=false;},children:u=>{c?.auth_required?(u.push("<!--[-->"),we(u,{auth_message:c.auth_message,root:c.root,space_id:d,app_mode:E,i18n:store_get(e??={},"$_",is)})):(u.push("<!--[!-->"),c&&z?(u.push("<!--[-->"),ve(u,spread_props([{app:z},c,{fill_height:!h&&c.fill_height,theme_mode:k,control_page_title:y,target:S,autoscroll:p,footer_links:h?[]:c.footer_links,app_mode:E,version:m,search_params:store_get(e??={},"$page",Gt).url.searchParams,initial_layout:r.layout,get ready(){return q},set ready(w){q=w,I=false;},get render_complete(){return N},set render_complete(w){N=w,I=false;},get add_new_message(){return P},set add_new_message(w){P=w,I=false;}}]))):u.push("<!--[!-->"),u.push("<!--]-->")),u.push("<!--]-->");},$$slots:{default:true}});}do I=true,V=i.copy(),et(V);while(!I);i.subsume(V),e&&unsubscribe_stores(e);});}

export { Ze as default };
//# sourceMappingURL=_page.svelte-BfEweUag.js.map
