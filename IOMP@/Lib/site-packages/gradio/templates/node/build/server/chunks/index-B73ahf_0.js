import { f as fallback } from './async-DWBXLqlH.js';
import { s as store_get, d as attr_class, g as attr_style, i as slot, a as attr, j as stringify, u as unsubscribe_stores, c as bind_props, e as ensure_array_like } from './index-D1re1cuM.js';
import { t as tick } from './index-server-D4bj_1UO.js';
import { s as ss, i as is, l as ls, u as us, h as hs } from './2-C3I2NxUJ.js';
export { _ as changeLocale, b as get_initial_locale, d as is_translation_metadata, m as language_choices, K as load_translations, a as mount_css, c as prefix_css, e as process_langs, g as setupi18n } from './2-C3I2NxUJ.js';
import { u } from './index6-vb2nI4_V.js';
import { g } from './utils.svelte-Cx-zzaP-.js';
export { d as i18n_marker } from './utils.svelte-Cx-zzaP-.js';
import { e as escape_html } from './escaping-CBnpiEl5.js';
import './context-BZS6UlnY.js';
import './uneval-ZBzcyJ66.js';
import './clone-CubQhOZi.js';
import './index5-BoOEKc6P.js';
import './dev-fallback-Bc5Ork7Y.js';

const K="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='10'%20height='10'%20fill='none'%3e%3cpath%20fill='%23FF3270'%20d='M1.93%206.03v2.04h2.04V6.03H1.93Z'/%3e%3cpath%20fill='%23861FFF'%20d='M6.03%206.03v2.04h2.04V6.03H6.03Z'/%3e%3cpath%20fill='%23097EFF'%20d='M1.93%201.93v2.04h2.04V1.93H1.93Z'/%3e%3cpath%20fill='%23000'%20fill-rule='evenodd'%20d='M.5%201.4c0-.5.4-.9.9-.9h3.1a.9.9%200%200%201%20.87.67A2.44%202.44%200%200%201%209.5%202.95c0%20.65-.25%201.24-.67%201.68.39.1.67.46.67.88v3.08c0%20.5-.4.91-.9.91H1.4a.9.9%200%200%201-.9-.9V1.4Zm1.43.53v2.04h2.04V1.93H1.93Zm0%206.14V6.03h2.04v2.04H1.93Zm4.1%200V6.03h2.04v2.04H6.03Zm0-5.12a1.02%201.02%200%201%201%202.04%200%201.02%201.02%200%200%201-2.04%200Z'%20clip-rule='evenodd'/%3e%3cpath%20fill='%23FFD702'%20d='M7.05%201.93a1.02%201.02%200%201%200%200%202.04%201.02%201.02%200%200%200%200-2.04Z'/%3e%3c/svg%3e";function at(s$1,t){s$1.component(e=>{var i;let r,a,n=t.wrapper,o=t.version,p=t.initial_height,h=t.fill_width,m=t.is_embed,g=t.space,b=t.display,F=t.info,A=t.loaded,S=fallback(t.pages,()=>[],true),z=fallback(t.current_page,""),R=t.root,D=fallback(t.components,()=>[],true),k=D.find(u=>u.type==="navbar"),_=k?{visible:k.props.visible,main_page_name:k.props.main_page_name,value:k.props.value}:null;_&&ss.set(_);function L(u){let d=u.split("?")[0].split("#")[0];return d=d.replace(/^\/+|\/+$/g,""),d}function G(u,d){return u.startsWith("http://")||u.startsWith("https://")?false:L(u)===L(d)}if(store_get(i??={},"$navbar_config",ss)&&(_={visible:store_get(i??={},"$navbar_config",ss).visible??true,main_page_name:store_get(i??={},"$navbar_config",ss).main_page_name??"Home",value:store_get(i??={},"$navbar_config",ss).value??null}),r=S.length>1&&(_===null||_.visible!==false),a=(()=>{let u=S.filter(([f,c,v],w)=>w===0&&f===""?_?.main_page_name!==false:v!==false),d=_&&_.main_page_name!==false&&_.main_page_name!=="Home"?u.map(([f,c,v],w)=>w===0&&f===""&&c==="Home"?[f,_.main_page_name]:[f,c]):u.map(([f,c])=>[f,c]);if(_?.value&&_.value.length>0){const f=new Set(d.map(([v])=>v)),c=_.value.map(([v,w])=>[w,v]).filter(([v])=>!f.has(v));return [...d,...c]}return d})(),e.push(`<div${attr_class(`gradio-container gradio-container-${stringify(o)}`,"svelte-99kmwu",{fill_width:h,"embed-container":b,"with-info":F})} data-iframe-height=""${attr_style("",{"min-height":A?"initial":p,"flex-grow":b?"auto":"1"})}>`),r){e.push("<!--[-->"),e.push(`<div class="nav-holder svelte-99kmwu"><nav${attr_class("fillable svelte-99kmwu",void 0,{fill_width:h})}><!--[-->`);const u=ensure_array_like(a);for(let d=0,f=u.length;d<f;d++){let[c,v]=u[d];e.push(`<a${attr("href",c.startsWith("http://")||c.startsWith("https://")?c:`${R}/${c}`)} data-sveltekit-reload=""${attr("target",c.startsWith("http://")||c.startsWith("https://")?"_blank":"_self")}${attr("rel",c.startsWith("http://")||c.startsWith("https://")?"noopener noreferrer":"")}${attr_class("svelte-99kmwu",void 0,{active:G(c,z)})}>${escape_html(v)}</a>`);}e.push("<!--]--></nav></div>");}else e.push("<!--[!-->");e.push(`<!--]--> <div${attr_class("main fillable svelte-99kmwu",void 0,{fill_width:h,app:!b&&!m})}><!--[-->`),slot(e,t,"default",{},null),e.push("<!--]--> <div>"),b&&g&&F?(e.push("<!--[-->"),e.push(`<div class="info svelte-99kmwu"><span class="svelte-99kmwu"><a${attr("href",`https://huggingface.co/spaces/${stringify(g)}`)} class="title svelte-99kmwu">${escape_html(g)}</a></span> <span class="svelte-99kmwu">${escape_html(store_get(i??={},"$_",is)("common.built_with"))} <a class="gradio svelte-99kmwu" href="https://gradio.app">Gradio</a>.</span> <span class="svelte-99kmwu">${escape_html(store_get(i??={},"$_",is)("common.hosted_on"))} <a class="hf svelte-99kmwu" href="https://huggingface.co/spaces"><span class="space-logo svelte-99kmwu"><img${attr("src",K)} alt="Hugging Face Space" class="svelte-99kmwu"/></span> Spaces</a></span></div>`)):e.push("<!--[!-->"),e.push("<!--]--></div></div></div>"),i&&unsubscribe_stores(i),bind_props(t,{wrapper:n,version:o,initial_height:p,fill_width:h,is_embed:m,space:g,display:b,info:F,loaded:A,pages:S,current_page:z,root:R,components:D});});}const N={walkthrough:"tabs",walkthroughstep:"tabitem"};class nt{#r;#e;#s;reactive_formatter=t=>t;#t;client;root;root_untracked;#a=new Set;#n=new Set;#h=[];#o=new Map;#i=new Map;#l;component_ids;initial_tabs={};components_to_register=new Set;ready;ready_resolve;resolved=false;#p=new Set;constructor(t,e,i,r,a,n,o){this.ready=new Promise(h=>{this.ready_resolve=h;}),this.reactive_formatter=n,this.#t={...r,api_url:new URL(r.api_prefix,r.root).toString()},this.#r=t,this.#e=e,this.#s=i,this.root=this.create_node({id:e.id,children:[]},new Map,true);for(const h of t)h.props.visible!=false&&this.components_to_register.add(h.id);this.client=a,this.prepare();const p=t.reduce((h,m)=>(h.set(m.id,m),h),new Map);this.root.children=this.#e.children.map(h=>this.traverse(h,m=>this.create_node(m,p,false,this.reactive_formatter))),this.component_ids=t.map(h=>h.id),this.initial_tabs={},W(this.root,this.initial_tabs),this.postprocess(this.root),this.#l=o,this.root_untracked=this.root;}reload(t,e,i,r){this.#e=e,this.#r=t,this.#t={...r,api_url:new URL(r.api_prefix,r.root).toString()},this.#s=i,this.root=this.create_node({id:e.id,children:[]},new Map,true);for(const n of t)n.props.visible!=false&&this.components_to_register.add(n.id);this.prepare();const a=t.reduce((n,o)=>(n.set(o.id,o),n),new Map);this.root.children=this.#e.children.map(n=>this.traverse(n,o=>this.create_node(o,a,false,this.reactive_formatter))),this.component_ids=t.map(n=>n.id),this.initial_tabs={},W(this.root,this.initial_tabs),this.postprocess(this.root);}register_component(t,e,i){this.#i.set(t,e),this.#o.set(t,i),this.components_to_register.delete(t),this.components_to_register.size===0&&!this.resolved&&(this.resolved=true,this.ready_resolve());}prepare(){const[t,e]=ls(this.#s);this.#a=t,this.#n=e;}process(){}postprocess(t){this.root=this.traverse(t,[e=>E(e,this.#t.api_url),e=>Y(e,this.components_to_register),e=>U(e,this.initial_tabs),e=>this.find_attached_events(e,this.#s),e=>$(e,this.components_to_register,this.#p)]);}find_attached_events(t,e){const i=e.filter(r=>r.targets.find(([a])=>a===t.id)).map(r=>{const a=r.targets.find(([n])=>n===t.id);return a?a[1]:null}).filter(Boolean);return t.props.shared_props.attached_events=i,t}traverse(t,e){function i(r,a,n){const o=a(r);return "children"in r&&r.children.length>0&&(o.children=r.children?.map(p=>n(p,a))||[]),o}if(Array.isArray(e)){let r=t;for(const a of e)r=i(r,a,this.traverse.bind(this));return r}else return i(t,e,this.traverse.bind(this))}create_node(t,e,i=false,r){let a;if(i?a={type:"column",id:t.id,props:{visible:true,root:"",theme_mode:"light"},component_class_id:"column",key:null}:a=e.get(t.id),!a)throw new Error(`Component with ID ${t.id} not found`);r&&(a.props.i18n=r);const n=Q(t.id,a.props,[this.#a,this.#n],this.client,this.#t.api_url,{...this.#t}),o=N[a.type]||a.type;return {id:t.id,type:o,props:n,children:[],show_progress_on:null,component_class_id:a.component_class_id||a.type,component:n.shared_props.visible!==false?us(a.type,a.component_class_id,this.#t.api_url||""):null,key:a.key,rendered_in:a.rendered_in,documentation:a.documentation,original_visibility:n.shared_props.visible}}rerender(t,e){const i=t.reduce((o,p)=>(o.set(p.id,p),o),new Map),r=this.traverse(e,o=>this.create_node(o,i,false,this.reactive_formatter));W(r,this.initial_tabs);const a=this.traverse(r,o=>U(o,this.initial_tabs)),n=M(this.root,a.id);if(!n)throw new Error("Rerender failed: root node not found in current tree");n.children=a.children;}async update_visibility(t,e){t.children.forEach(i=>{const r=this.#i.get(i.id);r&&r(e),this.update_visibility(i,e);});}async update_state(t,e,i=true){const r=M(this.root,t);let a=false;i&&!r?.component&&(await tick(),this.root=this.traverse(this.root,[o=>X(o,t,e.visible),o=>E(o,this.#t.api_url)]),await tick(),a=true);const n=this.#i.get(t);if(n)n&&n(e);else {const o=r?.props.props.value,p=B(e);r.props.shared_props={...r?.props.shared_props,...p.shared_props},r.props.props={...r?.props.props,...p.props},"value"in e&&!u(o,e.value)&&this.#l(t,"change",null);}!i||a||(await tick(),await this.update_visibility(r,e));}async get_state(t){const e=this.#o.get(t),i=M(this.root,t);return !e&&!i?null:e?await e():i?Promise.resolve({value:i.props.props.value}):null}async render_previously_invisible_children(t){this.root=this.traverse(this.root,[e=>(e.id===t&&q(e,this.#p),e),e=>E(e,this.#t.api_url)]);}}function q(s,t){s.props.shared_props.visible=t.has(s.id)?true:s.props.shared_props.visible,s.children.forEach(e=>{q(e,t);});}function O(s,t,e){return t?t.reduce((i,r)=>(i[r]=async(...a)=>(a.length===1&&(a=a[0]),await e.component_server(s,r,a)),i),{}):{}}function B(s){const t={},e={};for(const i in s)if(i==="id"||i==="autoscroll")e[i]=s[i];else if(g.includes(i)){const r=i;t[r]=s[i];}else e[i]=s[i];return {shared_props:t,props:e}}function Q(s,t,e,i,r,a={}){const{shared_props:n,props:o}=B(t);n.server=O(s,t.server_fns,i);for(const p in a)if(g.includes(p)){const h=p;n[h]=a[p];}else o[p]=a[p];return n.client=i,n.id=s,n.interactive=hs(s,n.interactive,o.value,e),n.load_component=(p,h)=>us(p,"",r,h),n.visible=n.visible===void 0?true:n.visible,n.loading_status={},{shared_props:n,props:o}}function E(s,t){if(s.props.shared_props.visible&&!s.component){const e={...s,component:us(s.type,s.component_class_id,t),children:[]};return s.children&&(e.children=s.children.map(i=>E(i,t))),e}else return s}function X(s,t,e){return s.id==t&&(s.props.shared_props.visible=e),s}function H(s,t){t.delete(s.id),s.children&&s.children.forEach(e=>H(e,t));}function Y(s,t){return s.props.shared_props.visible!==true&&H(s,t),s}function x(s,t){return s.props.shared_props.visible===true&&(t.add(s.id),s.props.shared_props.visible=false),s.children.forEach(e=>{x(e,t);}),s}function $(s,t,e){return s.type==="accordion"&&s.props.props.open===false&&(H(s,t),s.children&&s.children.forEach(i=>{x(i,e);})),s.type==="tabs"&&s.children.forEach(i=>{i.type==="tabitem"&&i.props.props.id!==(s.props.props.selected||s.props.props.initial_tabs[0].id)&&(H(i,t),x(i,e));}),s}function U(s,t){if(s.type==="tabs"&&s.id in t){const e=t[s.id].sort((i,r)=>i.order-r.order);s.props.props.initial_tabs=e;}else s.type==="tabitem"&&(s.props.props.component_id=s.id);return s}function C(s,t,e,i){e!==null&&s.type==="tabitem"&&(e in t||(t[e]=[]),"id"in s.props.props||(s.props.props.id=s.id),t[e].push({label:s.props.shared_props.label,id:s.props.props.id,elem_id:s.props.shared_props.elem_id,visible:s.props.shared_props.visible,interactive:s.props.shared_props.interactive,scale:s.props.shared_props.scale||null,component_id:s.id}),s.props.props.order=i),s.children&&s.children.forEach((r,a)=>{C(r,t,s.type==="tabs"?s.id:null,s.type==="tabs"?a:null);});}function W(s,t){function e(i){"children"in i&&i.children.length>0&&i.children?.forEach(r=>C(r,t,i.type==="tabs"?i.id:null,null));}return e(s)}function M(s,t){if(s.id===t)return s;if(s.children)for(const e of s.children){const i=M(e,t);if(i)return i}return null}

export { nt as AppTree, at as Embed };
//# sourceMappingURL=index-B73ahf_0.js.map
