import './async-DWBXLqlH.js';
import { g as attr_style, j as stringify, s as store_get, e as ensure_array_like, u as unsubscribe_stores, d as attr_class, f as html } from './index-D1re1cuM.js';
import { Z as Ze } from './index35-BXnw0CDT.js';
import { s as spring } from './spring-D6sHki8W.js';
import { e as escape_html } from './escaping-CBnpiEl5.js';

function b(e){e.push('<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 6L8 10L12 6"></path></svg>');}function z(e){e.push('<svg fill="none" stroke="currentColor" viewBox="0 0 24 24" width="100%" height="100%" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z"></path></svg>');}function M(e){e.push('<svg fill="none" stroke="currentColor" viewBox="0 0 24 24" width="100%" height="100%" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke-linecap="round" stroke-linejoin="round" d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"></path></svg>');}function j(e){e.push('<svg fill="none" stroke="currentColor" viewBox="0 0 24 24" width="100%" height="100%" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>');}function C(e){e.push('<svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" width="100%" height="100%" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" stroke-linecap="round" stroke-linejoin="round"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"></path></svg>');}function L(e){return Ze(e)}function q(e,o){e.component(t=>{let{type:i,messages:n=[],expanded:r=true}=o,h=0;const c={error:"An error occurred.",warning:"Warning.",success:"Success.",info:"Info."};let a=n.length,l=n[0],g=i.charAt(0).toUpperCase()+i.slice(1),u=l?.duration!==null,v=u?`${l.duration}s`:"0s";if(t.push(`<div${attr_class(`toast-body ${stringify(i)}`,"svelte-irmu64")} role="status" aria-live="polite" data-testid="toast-body"${attr_style(`transform: translateX(${stringify(h)}px); opacity: ${stringify(1-Math.abs(h)/300)};`)}><div class="toast-header svelte-irmu64" role="button" tabindex="0"><div${attr_class(`toast-icon ${stringify(i)}`,"svelte-irmu64")}>`),i==="warning"?(t.push("<!--[-->"),C(t)):(t.push("<!--[!-->"),i==="info"?(t.push("<!--[-->"),M(t)):(t.push("<!--[!-->"),i==="success"?(t.push("<!--[-->"),j(t)):(t.push("<!--[!-->"),i==="error"?(t.push("<!--[-->"),z(t)):t.push("<!--[!-->"),t.push("<!--]-->")),t.push("<!--]-->")),t.push("<!--]-->")),t.push(`<!--]--></div> <div class="toast-title-row svelte-irmu64"><span${attr_class(`toast-title ${stringify(i)}`,"svelte-irmu64")}>${escape_html(g)} `),a>1?(t.push("<!--[-->"),t.push(`<span class="toast-count svelte-irmu64">(${escape_html(a)})</span>`)):t.push("<!--[!-->"),t.push(`<!--]--></span> <div${attr_class("chevron svelte-irmu64",void 0,{expanded:r,visible:a>0})}>`),b(t),t.push(`<!----></div></div> <button${attr_class(`toast-close ${stringify(i)}`,"svelte-irmu64")} type="button" aria-label="Close" data-testid="toast-close"><span aria-hidden="true">Ã—</span></button></div> `),r){t.push("<!--[-->"),t.push('<div class="toast-messages svelte-irmu64"><!--[-->');const f=ensure_array_like(n);for(let _=0,p=f.length;_<p;_++){let d=f[_];t.push(`<div${attr_class(`toast-message-item ${stringify(i)}`,"svelte-irmu64")}><div${attr_class(`toast-message-text ${stringify(i)}`,"svelte-irmu64")} data-testid="toast-text">${html(L(d.message||c[i]))}</div></div> `),_<n.length-1?(t.push("<!--[-->"),t.push('<div class="toast-separator svelte-irmu64"></div>')):t.push("<!--[!-->"),t.push("<!--]-->");}t.push("<!--]--></div>");}else t.push("<!--[!-->");t.push("<!--]--> "),u?(t.push("<!--[-->"),t.push(`<div${attr_class(`timer ${stringify(i)}`,"svelte-irmu64")}${attr_style(`animation-duration: ${stringify(v)}`)}></div>`)):t.push("<!--[!-->"),t.push("<!--]--></div>");});}function I(e,o){e.component(t=>{var i;let{messages:n=[],on_close:r}=o;const h=spring(0,{stiffness:.4,damping:.5});let c=[];t.push(`<div class="toast-wrap svelte-1qhecvt"${attr_style(`--toast-top: ${stringify(store_get(i??={},"$top",h))}px;`)}><!--[-->`);const a=ensure_array_like(c);for(let l=0,g=a.length;l<g;l++){let u=a[l];t.push('<div class="toast-item svelte-1qhecvt">'),q(t,{type:u.type,messages:u.messages,expanded:u.expanded}),t.push("<!----></div>");}t.push("<!--]--></div>"),i&&unsubscribe_stores(i);});}class W{current={};fn_outputs={};fn_inputs={};pending_outputs=new Map;fn_status={};show_progress={};register(o,t,i,n){this.fn_outputs[o]=t,this.fn_inputs[o]=i,this.show_progress[o]=n;}clear(o){o in this.current&&(this.current[o]={});}update(o){this.resolve_args(o).forEach(({id:i,queue_position:n,queue_size:r,eta:h,status:c,message:a,progress:l,stream_state:g,time_limit:u,type:v})=>{this.current[i]={queue:o.queue||false,queue_size:r,queue_position:n,eta:h,stream_state:g,message:a,progress:l||void 0,status:c,fn_index:o.fn_index,time_limit:u,type:v,show_progress:this.show_progress[o.fn_index]};});}set_status(o,t){this.current[o].status=t;}resolve_args(o){const{fn_index:t,status:i,size:n=void 0,position:r=null,eta:h=null,message:c=null,stream_state:a=null,time_limit:l=null,progress_data:g=null}=o,u=this.fn_outputs[t],v=this.fn_status[t],f=this.fn_inputs[t];return u.concat(f).map(p=>{let d;const w=this.pending_outputs.get(p)||0;if(v==="pending"&&i!=="pending"){let m=w-1;this.pending_outputs.set(p,m<0?0:m),d=m>0?"pending":i;}else v==="pending"&&i==="pending"?d="pending":v!=="pending"&&i==="pending"?(d="pending",this.pending_outputs.set(p,w+1)):d=i;const k=f.includes(p)&&a?"input":u.includes(p)?"output":"skip";return {id:p,queue_position:r,queue_size:n,eta:h,status:d,message:c,progress:g,stream_state:a,time_limit:l,type:k}}).filter(p=>p.type!=="skip")}}

export { I, W };
//# sourceMappingURL=state.svelte-BHvoECzk.js.map
